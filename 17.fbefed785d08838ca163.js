(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{AVRW:function(e,t,o){"use strict";o.r(t),o.d(t,"UsersModule",function(){return G});var i=o("5EWq"),n=o("Xa2L"),a=o("/1cH"),l=o("iadO"),r=o("1jcm"),s=o("d3UM"),c=o("NFeN"),b=o("qFsG"),u=o("kmnG"),d=o("0IaG"),p=o("V5BG"),m=o("Q4Mo"),f=o("jIHw"),h=o("7kUa"),g=o("3Pt+"),v=o("rEr+"),C=o("PCNd"),V=o("ofXK"),y=o("mrSG"),W=o("4ZtF"),k=o("nnAt"),w=o("fXoL"),D=o("otk6"),Q=o("FKr1");function M(e,t){if(1&e&&(w.Wb(0,"mat-error",8),w.Qc(1),w.Vb()),2&e){const e=w.hc();w.Cb(1),w.Rc(e.displayMessage.name)}}function x(e,t){if(1&e&&(w.Wb(0,"mat-error",8),w.Qc(1),w.Vb()),2&e){const e=w.hc();w.Cb(1),w.Rc(e.displayMessage.email)}}function S(e,t){if(1&e&&(w.Wb(0,"mat-error",8),w.Qc(1),w.Vb()),2&e){const e=w.hc();w.Cb(1),w.Rc(e.displayMessage.phone)}}const A=function(){return{standalone:!0}};let O=(()=>{class e{constructor(e,t,o){var i,n,a,l,r,s,c,b,u,d,p,m,f;this.fb=e,this.fun=t,this.config=o,this.formSubmit=new w.o,this.formClose=new w.o,this.isPublished=!1,this.isEnabled=!1,this.displayMessage={},this.category=null===(i=this.config.lookupData)||void 0===i?void 0:i.category,this.image=Object(W.k)(null===(n=this.config.formData)||void 0===n?void 0:n.image)?null===(a=this.config.formData)||void 0===a?void 0:a.image:Object(W.p)(null===(l=this.config.formData)||void 0===l?void 0:l.image)?[null===(r=this.config.formData)||void 0===r?void 0:r.image]:[],this.isPublished=void 0===(null===(s=this.config.formData)||void 0===s?void 0:s.disabled)||!(null===(c=this.config.formData)||void 0===c?void 0:c.disabled),this.form=this.fb.group({id:null===(b=this.config.formData)||void 0===b?void 0:b.id,role:(null===(u=this.config.formData)||void 0===u?void 0:u.role)||"driver",phone:(null===(d=this.config.formData)||void 0===d?void 0:d.phone)||"",name:[(null===(p=this.config.formData)||void 0===p?void 0:p.name)||"",g.x.required],email:[(null===(m=this.config.formData)||void 0===m?void 0:m.email)||"",[g.x.required,g.x.email]],disabled:[this.isPublished,g.x.required],created_at:null===(f=this.config.formData)||void 0===f?void 0:f.created_at}),this.validationMessages={name:{required:"field is required."},email:{required:"field is required.",email:"incorrect email"},phone:{minlength:"field has few character"}},this.genericValidator=new k.a(this.validationMessages)}ngOnInit(){this.form.valueChanges.subscribe(()=>this.displayMessage=this.genericValidator.processMessages(this.form))}blur(){this.displayMessage=this.genericValidator.processMessages(this.form)}keyDown(e,t){return e.key?this.fun.allowedKey(e.key,t):(e.target.value=this.fun.removeNotAllowedKey(e.target.value,t),!0)}getFile(e){this.form.controls.image.setValue((null==e?void 0:e.upload.length)>0?null==e?void 0:e.upload:[])}onSubmit(){const e=Object.assign(Object.assign({},this.form.value),{disabled:!this.isPublished});this.formSubmit.emit(e)}onCancel(){this.formClose.emit()}}return e.\u0275fac=function(t){return new(t||e)(w.Qb(g.e),w.Qb(D.a),w.Qb(d.a))},e.\u0275cmp=w.Kb({type:e,selectors:[["app-users-form"]],outputs:{formSubmit:"formSubmit",formClose:"formClose"},decls:61,vars:9,consts:[["autocomplete","off",3,"formGroup","submit"],["mat-dialog-title","",1,"p-dialog-header","p-d-flex","p-jc-lg-between",2,"padding","0.2re 0.3rem"],[1,"p-dialog-title","capitalize"],["pButton","","pRipple","","icon","pi pi-times",1,"shadow-none","p-button-rounded","p-button-plain","p-button-text","p-mr-1",3,"click"],["mat-dialog-content","",1,"p-dialog-content"],[1,"p-grid"],[1,"p-col-12"],[1,"full-width"],[1,"error"],["matInput","","tabindex","0","type","text","value","","formControlName","name",3,"blur","input","keydown"],["name",""],["class","error",4,"ngIf"],["matInput","","tabindex","0","type","text","value","","formControlName","email",3,"blur","input","keydown"],["email",""],["matInput","","tabindex","0","minlength","10","maxlength","13","type","text","value","","formControlName","phone",3,"blur","input","keydown"],["phone",""],["formControlName","role",3,"blur"],["value","admin"],["value","driver"],["value","member"],["color","primary","forControlName","disabled",1,"example-section",3,"ngModel","ngModelOptions","ngModelChange"],["mat-dialog-actions","",1,"p-dialog-footer","button-row"],["pbutton","","pripple","","label","Cancel","type","button","icon","pi pi-times",1,"p-button-text","p-ripple","p-button","p-component","shadow-none","p-mr-2",3,"click"],["aria-hidden","true",1,"p-button-icon","p-button-icon-left","pi","pi-times"],[1,"p-button-label"],[1,"p-ink"],["pbutton","","pripple","","label","Save","icon","pi pi-check","type","submit",1,"p-button-text","p-ripple","p-button","p-component","shadow-none",3,"disabled"],["aria-hidden","true",1,"p-button-icon","p-button-icon-left","pi","pi-check"]],template:function(e,t){1&e&&(w.Wb(0,"form",0),w.ec("submit",function(){return t.onSubmit()}),w.Wb(1,"div",1),w.Wb(2,"div",2),w.Qc(3),w.Vb(),w.Wb(4,"button",3),w.ec("click",function(){return t.onCancel()}),w.Vb(),w.Vb(),w.Wb(5,"div",4),w.Wb(6,"div",5),w.Wb(7,"div",6),w.Wb(8,"mat-form-field",7),w.Wb(9,"mat-label"),w.Qc(10,"Name"),w.Wb(11,"span",8),w.Qc(12,"*"),w.Vb(),w.Vb(),w.Wb(13,"input",9,10),w.ec("blur",function(){return t.blur()})("input",function(e){return t.keyDown(e,"intStr")})("keydown",function(e){return t.keyDown(e,"intStr")}),w.Vb(),w.Oc(15,M,2,1,"mat-error",11),w.Vb(),w.Vb(),w.Wb(16,"div",6),w.Wb(17,"mat-form-field",7),w.Wb(18,"mat-label"),w.Qc(19,"Email"),w.Wb(20,"span",8),w.Qc(21,"*"),w.Vb(),w.Vb(),w.Wb(22,"input",12,13),w.ec("blur",function(){return t.blur()})("input",function(e){return t.keyDown(e,"email")})("keydown",function(e){return t.keyDown(e,"email")}),w.Vb(),w.Oc(24,x,2,1,"mat-error",11),w.Vb(),w.Vb(),w.Wb(25,"div",6),w.Wb(26,"mat-form-field",7),w.Wb(27,"mat-label"),w.Qc(28,"Phone"),w.Vb(),w.Wb(29,"input",14,15),w.ec("blur",function(){return t.blur()})("input",function(e){return t.keyDown(e,"phone")})("keydown",function(e){return t.keyDown(e,"phone")}),w.Vb(),w.Oc(31,S,2,1,"mat-error",11),w.Vb(),w.Vb(),w.Wb(32,"div",6),w.Wb(33,"mat-form-field",7),w.Wb(34,"mat-label"),w.Qc(35,"Role"),w.Vb(),w.Wb(36,"mat-select",16),w.ec("blur",function(){return t.blur()}),w.Wb(37,"mat-option",17),w.Qc(38,"Admin"),w.Vb(),w.Wb(39,"mat-option",18),w.Qc(40,"Driver"),w.Vb(),w.Wb(41,"mat-option",19),w.Qc(42,"Member"),w.Vb(),w.Vb(),w.Vb(),w.Vb(),w.Wb(43,"mat-slide-toggle",20),w.ec("ngModelChange",function(e){return t.isPublished=e}),w.Wb(44,"span"),w.Qc(45,"Access"),w.Vb(),w.Rb(46,"br"),w.Wb(47,"mat-hint"),w.Qc(48,"block or allow users"),w.Vb(),w.Vb(),w.Rb(49,"br"),w.Vb(),w.Vb(),w.Wb(50,"div",21),w.Wb(51,"button",22),w.ec("click",function(){return t.onCancel()}),w.Rb(52,"span",23),w.Wb(53,"span",24),w.Qc(54,"Cancel"),w.Vb(),w.Rb(55,"span",25),w.Vb(),w.Wb(56,"button",26),w.Rb(57,"span",27),w.Wb(58,"span",24),w.Qc(59,"Save"),w.Vb(),w.Rb(60,"span",25),w.Vb(),w.Vb(),w.Vb()),2&e&&(w.oc("formGroup",t.form),w.Cb(3),w.Rc(t.config.title),w.Cb(12),w.oc("ngIf",t.displayMessage.name),w.Cb(9),w.oc("ngIf",t.displayMessage.email),w.Cb(7),w.oc("ngIf",t.displayMessage.phone),w.Cb(12),w.oc("ngModel",t.isPublished)("ngModelOptions",w.rc(8,A)),w.Cb(13),w.oc("disabled",!t.form.valid))},directives:[g.y,g.r,g.i,d.g,f.b,m.a,d.e,u.c,u.g,b.b,g.c,g.q,g.g,V.m,g.m,g.l,s.a,Q.h,r.a,g.t,u.f,d.c,u.b],styles:[".example-section[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;height:60px}"]}),e})();var R=o("12jx"),B=o("SRE/"),P=o("H0VJ"),I=o("WLRH");let N=(()=>{class e{constructor(e,t){this.userService=e,this.dialogServices=t,this.caption="Drivers",this.columns=[{label:"Name",name:"name",sortable:!0},{label:"Email",name:"email",type:"email",sortable:!0},{label:"Phone",name:"phone",type:"phone",sortable:!0},{label:"Role",name:"role",sortable:!0},{label:"Access",name:"disabled",type:"status",sortable:!0}],this.actions=[{icon:"pencil",color:"warning",disable:!1}],this.toolBarActions=[{position:"right",action:[]},{position:"left",action:[{label:"Create",icon:"plus",color:"",tooltip:null}]}],this.dialogConfig={width:"500px",formComponent:O,service:this.userService}}ngOnInit(){this.user$=this.onLoad("driver")}add(){this.dialogConfig.title="Add User",this.dialogConfig.formData=null,this.dialogConfig.lookupData={};const e=this.dialogServices.handleDialog(this.dialogConfig);console.log(e)}update(e){this.dialogConfig.title="Update User",this.dialogConfig.formData=e,this.dialogConfig.lookupData={},this.dialogServices.handleDialog(this.dialogConfig)}onChange(e){this.user$=this.onLoad(e.value)}onLoad(e){let t;return this.blockUI.start("Loading..."),t=this.userService.get("all"===e?null:e).snapshotChanges(),t.subscribe(e=>{this.blockUI.stop()}),t}onActionClick(e){"pencil"===e.type&&this.update(e.data)}onToolBarActionClick(e){"plus"===e&&this.add()}}return e.\u0275fac=function(t){return new(t||e)(w.Qb(B.a),w.Qb(P.a))},e.\u0275cmp=w.Kb({type:e,selectors:[["app-users"]],decls:17,vars:11,consts:[[1,"card"],[1,"p-toolbar-group-left"],[1,"full-width"],[3,"value","selectionChange"],["value","all"],["value","admin"],["value","driver"],["value","member"],[3,"caption","columns","data","actions","first","rows","sortBy","toolBarActions","buttonClick","toolBarButtonClick"]],template:function(e,t){1&e&&(w.Wb(0,"div",0),w.Wb(1,"p-toolbar"),w.Wb(2,"div",1),w.Wb(3,"mat-form-field",2),w.Wb(4,"mat-label"),w.Qc(5,"Category"),w.Vb(),w.Wb(6,"mat-select",3),w.ec("selectionChange",function(e){return t.onChange(e)}),w.Wb(7,"mat-option",4),w.Qc(8,"All"),w.Vb(),w.Wb(9,"mat-option",5),w.Qc(10,"Admins"),w.Vb(),w.Wb(11,"mat-option",6),w.Qc(12,"Drivers"),w.Vb(),w.Wb(13,"mat-option",7),w.Qc(14,"Members"),w.Vb(),w.Vb(),w.Vb(),w.Vb(),w.Vb(),w.Vb(),w.Wb(15,"app-table-template",8),w.ec("buttonClick",function(e){return t.onActionClick(e)})("toolBarButtonClick",function(e){return t.onToolBarActionClick(e)}),w.ic(16,"async"),w.Vb()),2&e&&(w.Cb(6),w.oc("value","driver"),w.Cb(9),w.oc("caption",t.caption)("columns",t.columns)("data",w.jc(16,9,t.user$))("actions",t.actions)("first",(null==t.currentPage?null:t.currentPage.first)||0)("rows",(null==t.currentPage?null:t.currentPage.rows)||10)("sortBy",t.sortBy)("toolBarActions",t.toolBarActions))},directives:[i.a,u.c,u.g,s.a,Q.h,I.a],pipes:[V.b],styles:[""]}),Object(y.__decorate)([Object(R.a)()],e.prototype,"blockUI",void 0),e})();var j=o("tyNb");const q=[{path:"",component:N},{path:"**",redirectTo:""}];let U=(()=>{class e{}return e.\u0275mod=w.Ob({type:e}),e.\u0275inj=w.Nb({factory:function(t){return new(t||e)},imports:[[j.e.forChild(q)],j.e]}),e})(),G=(()=>{class e{}return e.\u0275mod=w.Ob({type:e}),e.\u0275inj=w.Nb({factory:function(t){return new(t||e)},imports:[[V.c,U,C.a,v.f,g.k,g.v,h.b,f.c,m.b,i.b,p.a,d.f,u.e,b.c,c.a,s.b,r.b,l.e,a.a,n.a]]}),e})()}}]);