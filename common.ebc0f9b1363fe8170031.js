(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{DYbl:function(t,o,e){"use strict";e.d(o,"a",function(){return c});var l=e("fXoL"),i=e("sSZD"),n=e("I/3d"),r=e("otk6");let c=(()=>{class t{constructor(t,o,e){this.db=t,this.firestore=o,this.fun=e,this.url="/cars"}get(t=!1){const o=""+this.url;return t?this.firestore.collection(o,o=>o.where("status","==",t)):this.firestore.collection(o)}add(t,o=null){var e;delete t.id;const l=[],i=""+this.url;if((null===(e=null==t?void 0:t.image)||void 0===e?void 0:e.length)>0)return t.image.forEach((e,n)=>this.fun.storeToFirebase(e,this.url).then(e=>{if(l.push(e),n+1===t.image.length)return t.image=l,t.created_at=(new Date).toISOString(),this.firestore.collection(i).add(t).then(t=>{var e;null==o||o.ref.close(),null===(e=null==o?void 0:o.block)||void 0===e||e.stop()}).catch(t=>{var e;null===(e=null==o?void 0:o.block)||void 0===e||e.stop()});n++}).catch(t=>{o.block.stop(),this.fun.notify("",t,1e4)}));t.created_at=(new Date).toISOString(),this.firestore.collection(i).add(t).then(t=>{var e;null==o||o.ref.close(),null===(e=null==o?void 0:o.block)||void 0===e||e.stop()}).catch(t=>{var e;null===(e=null==o?void 0:o.block)||void 0===e||e.stop()})}update(t,o,e=null){var l;delete o.id;let i=0;const n=[];return(null===(l=null==o?void 0:o.image)||void 0===l?void 0:l.length)>0?o.image.forEach((l,r)=>null==(null==l?void 0:l.url)?this.fun.storeToFirebase(l,this.url).then(l=>{if(n.push(l),i++,r+1===o.image.length)return o.image=n,this.firestore.collection(this.url).doc(t).update(o).then(t=>{var o;null==e||e.ref.close(),null===(o=null==e?void 0:e.block)||void 0===o||o.stop()}).catch(t=>{var o;null===(o=null==e?void 0:e.block)||void 0===o||o.stop()});r++}).catch(t=>{e.block.stop(),this.fun.notify("","Something error occur",3e3)}):(n.push(null==l?void 0:l.url),0===i?(o.image=n,this.firestore.collection(this.url).doc(t).update(o).then(t=>{var o;null==e||e.ref.close(),null===(o=null==e?void 0:e.block)||void 0===o||o.stop()}).catch(t=>{var o;null===(o=null==e?void 0:e.block)||void 0===o||o.stop()})):void 0)):this.firestore.collection(this.url).doc(t).update(o).then(t=>{var o;null==e||e.ref.close(),null===(o=null==e?void 0:e.block)||void 0===o||o.stop()}).catch(t=>{var o;null===(o=null==e?void 0:e.block)||void 0===o||o.stop()})}delete(t,o=null){return this.firestore.collection(this.url).doc(t).delete()}fitch(t){return this.firestore.collection(this.url).doc(t).collection(t+"s").snapshotChanges()}}return t.\u0275fac=function(o){return new(o||t)(l.ac(i.a),l.ac(n.a),l.ac(r.a))},t.\u0275prov=l.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},GaOe:function(t,o,e){"use strict";e.d(o,"a",function(){return r});var l=e("fXoL"),i=e("sSZD"),n=e("otk6");let r=(()=>{class t{constructor(t,o){this.db=t,this.fun=o,this.url="/categories"}get(t=null){const o=null!==t&&""!==t.split("=")[1]?"?"+t:null!==t&&""===t.split("=")[1]?"/"+t:"";return this.db.list(`${this.url}${o}`)}add(t,o=null){var e;delete t.id;const l=[];return(null===(e=null==t?void 0:t.image)||void 0===e?void 0:e.length)>0?t.image.forEach((e,i)=>this.fun.storeToFirebase(e,this.url).then(e=>{if(l.push(e),i+1===t.image.length)return t.image=1===l.length?l[0]:l,t.created_at=(new Date).toISOString(),this.db.list(this.url).push(t).then(t=>{this.fun.notify("Added"),o.ref.close(),o.block.stop()}).catch(t=>{o.block.stop(),this.fun.notify("","Something error occur",3e3)});i++}).catch(t=>{o.block.stop(),this.fun.notify("","Something error occur",3e3)})):(t.created_at=(new Date).toISOString(),this.db.list(this.url).push(t).then(t=>{this.fun.notify("Added"),o.ref.close(),o.block.stop()}).catch(t=>{o.block.stop(),this.fun.notify("","Something error occur",3e3)}))}update(t,o,e=null){var l;delete o.id;const i=`${this.url}/${t}`;let n=0;const r=[];return(null===(l=null==o?void 0:o.image)||void 0===l?void 0:l.length)>0?o.image.forEach((t,l)=>null==(null==t?void 0:t.url)?this.fun.storeToFirebase(t,this.url).then(t=>{if(r.push(t),n++,l+1===o.image.length)return o.image=1===r.length?r[0]:r,this.db.object(i).update(o).then(t=>{this.fun.notify("Updated"),e.ref.close(),e.block.stop()}).catch(t=>{e.block.stop(),this.fun.notify("","Something error occur",3e3)});l++}).catch(t=>{e.block.stop(),this.fun.notify("","Something error occur",3e3)}):(r.push(null==t?void 0:t.url),0===n?(o.image=1===r.length?r[0]:r,this.db.object(i).update(o).then(t=>{this.fun.notify("Update"),e.ref.close(),e.block.stop()}).catch(t=>{e.block.stop(),this.fun.notify("","Something error occur",3e3)})):void 0)):this.db.object(i).update(o).then(t=>{this.fun.notify("Update"),e.ref.close(),e.block.stop()}).catch(t=>{e.block.stop(),this.fun.notify("","Something error occur",3e3)})}delete(t){return this.db.object(`${this.url}/${t}`).remove()}}return t.\u0275fac=function(o){return new(o||t)(l.ac(i.a),l.ac(n.a))},t.\u0275prov=l.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);