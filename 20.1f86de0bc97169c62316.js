(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{AVRW:function(t,i,o){"use strict";o.r(i),o.d(i,"UsersModule",function(){return E});var e=o("5EWq"),a=o("Xa2L"),n=o("/1cH"),s=o("iadO"),l=o("1jcm"),r=o("d3UM"),c=o("NFeN"),b=o("qFsG"),u=o("kmnG"),d=o("0IaG"),p=o("V5BG"),m=o("Q4Mo"),h=o("jIHw"),g=o("7kUa"),f=o("3Pt+"),v=o("rEr+"),C=o("PCNd"),y=o("ofXK"),V=o("mrSG"),W=o("YTlH"),k=o("4ZtF"),w=o("nnAt"),D=o("fXoL"),Q=o("otk6"),M=o("FKr1");const S=function(){return{standalone:!0}};let R=(()=>{class t{constructor(t,i,o){var e,a,n,s,l,r,c,b,u,d,p,m,h;this.fb=t,this.fun=i,this.config=o,this.formSubmit=new D.o,this.formClose=new D.o,this.isPublished=!1,this.isEnabled=!1,this.displayMessage={},this.category=null===(e=this.config.lookupData)||void 0===e?void 0:e.category,this.image=Object(k.k)(null===(a=this.config.formData)||void 0===a?void 0:a.image)?null===(n=this.config.formData)||void 0===n?void 0:n.image:Object(k.p)(null===(s=this.config.formData)||void 0===s?void 0:s.image)?[null===(l=this.config.formData)||void 0===l?void 0:l.image]:[],this.isPublished=void 0===(null===(r=this.config.formData)||void 0===r?void 0:r.disabled)||!(null===(c=this.config.formData)||void 0===c?void 0:c.disabled),this.form=this.fb.group({id:null===(b=this.config.formData)||void 0===b?void 0:b.id,role:(null===(u=this.config.formData)||void 0===u?void 0:u.role)||"driver",phone:(null===(d=this.config.formData)||void 0===d?void 0:d.phone)||"",name:[(null===(p=this.config.formData)||void 0===p?void 0:p.name)||"",f.x.required],email:[(null===(m=this.config.formData)||void 0===m?void 0:m.email)||"",[f.x.required,f.x.email]],disabled:[this.isPublished,f.x.required],created_at:null===(h=this.config.formData)||void 0===h?void 0:h.created_at}),this.validationMessages={name:{required:"field is required."},email:{required:"field is required.",email:"incorrect email"},phone:{minlength:"field has few character"}},this.genericValidator=new w.a(this.validationMessages)}ngOnInit(){this.form.valueChanges.subscribe(()=>this.displayMessage=this.genericValidator.processMessages(this.form))}blur(){this.displayMessage=this.genericValidator.processMessages(this.form)}keyDown(t,i){return t.key?this.fun.allowedKey(t.key,i):(t.target.value=this.fun.removeNotAllowedKey(t.target.value,i),!0)}getFile(t){this.form.controls.image.setValue((null==t?void 0:t.upload.length)>0?null==t?void 0:t.upload:[])}onSubmit(){const t=Object.assign(Object.assign({},this.form.value),{disabled:!this.isPublished});this.formSubmit.emit(t)}onCancel(){this.formClose.emit()}}return t.\u0275fac=function(i){return new(i||t)(D.Qb(f.e),D.Qb(Q.a),D.Qb(d.a))},t.\u0275cmp=D.Kb({type:t,selectors:[["app-users-form"]],outputs:{formSubmit:"formSubmit",formClose:"formClose"},decls:38,vars:6,consts:[["autocomplete","off",3,"formGroup","submit"],["mat-dialog-title","",1,"p-dialog-header","p-d-flex","p-jc-lg-between",2,"padding","0.2re 0.3rem"],[1,"p-dialog-title","capitalize"],["pButton","","pRipple","","icon","pi pi-times",1,"shadow-none","p-button-rounded","p-button-plain","p-button-text","p-mr-1",3,"click"],["mat-dialog-content","",1,"p-dialog-content"],[1,"p-grid"],[1,"p-col-12"],[1,"full-width"],["formControlName","role",3,"blur"],["value","admin"],["value","supervisor"],["value","driver"],["value","member"],["color","primary","forControlName","disabled",1,"example-section",3,"ngModel","ngModelOptions","ngModelChange"],["mat-dialog-actions","",1,"p-dialog-footer","button-row"],["pbutton","","pripple","","label","Cancel","type","button","icon","pi pi-times",1,"p-button-text","p-ripple","p-button","p-component","shadow-none","p-mr-2",3,"click"],["aria-hidden","true",1,"p-button-icon","p-button-icon-left","pi","pi-times"],[1,"p-button-label"],[1,"p-ink"],["pbutton","","pripple","","label","Save","icon","pi pi-check","type","submit",1,"p-button-text","p-ripple","p-button","p-component","shadow-none",3,"disabled"],["aria-hidden","true",1,"p-button-icon","p-button-icon-left","pi","pi-check"]],template:function(t,i){1&t&&(D.Wb(0,"form",0),D.ec("submit",function(){return i.onSubmit()}),D.Wb(1,"div",1),D.Wb(2,"div",2),D.Qc(3),D.Vb(),D.Wb(4,"button",3),D.ec("click",function(){return i.onCancel()}),D.Vb(),D.Vb(),D.Wb(5,"div",4),D.Wb(6,"div",5),D.Wb(7,"div",6),D.Wb(8,"mat-form-field",7),D.Wb(9,"mat-label"),D.Qc(10,"Role"),D.Vb(),D.Wb(11,"mat-select",8),D.ec("blur",function(){return i.blur()}),D.Wb(12,"mat-option",9),D.Qc(13,"Admin"),D.Vb(),D.Wb(14,"mat-option",10),D.Qc(15,"Supervisor"),D.Vb(),D.Wb(16,"mat-option",11),D.Qc(17,"Driver"),D.Vb(),D.Wb(18,"mat-option",12),D.Qc(19,"Member"),D.Vb(),D.Vb(),D.Vb(),D.Vb(),D.Wb(20,"mat-slide-toggle",13),D.ec("ngModelChange",function(t){return i.isPublished=t}),D.Wb(21,"span"),D.Qc(22,"Access"),D.Vb(),D.Rb(23,"br"),D.Wb(24,"mat-hint"),D.Qc(25,"block or allow users"),D.Vb(),D.Vb(),D.Rb(26,"br"),D.Vb(),D.Vb(),D.Wb(27,"div",14),D.Wb(28,"button",15),D.ec("click",function(){return i.onCancel()}),D.Rb(29,"span",16),D.Wb(30,"span",17),D.Qc(31,"Cancel"),D.Vb(),D.Rb(32,"span",18),D.Vb(),D.Wb(33,"button",19),D.Rb(34,"span",20),D.Wb(35,"span",17),D.Qc(36,"Save"),D.Vb(),D.Rb(37,"span",18),D.Vb(),D.Vb(),D.Vb()),2&t&&(D.oc("formGroup",i.form),D.Cb(3),D.Rc(i.config.title),D.Cb(17),D.oc("ngModel",i.isPublished)("ngModelOptions",D.rc(5,S)),D.Cb(13),D.oc("disabled",!i.form.valid))},directives:[f.y,f.r,f.i,d.g,h.b,m.a,d.e,u.c,u.g,r.a,f.q,f.g,M.i,l.a,f.t,u.f,d.c],styles:[".example-section[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;height:60px}"]}),t})();var A=o("12jx"),B=o("SRE/"),O=o("/zas"),x=o("H0VJ"),P=o("WLRH");function j(t,i){if(1&t){const t=D.Xb();D.Wb(0,"div",2),D.Wb(1,"p-toolbar"),D.Wb(2,"div",3),D.Wb(3,"mat-form-field",4),D.Wb(4,"mat-label"),D.Qc(5,"Category"),D.Vb(),D.Wb(6,"mat-select",5),D.ec("valueChange",function(i){return D.Ec(t),D.hc().category=i})("selectionChange",function(i){return D.Ec(t),D.hc().onChange(i)}),D.Wb(7,"mat-option",6),D.Qc(8,"All"),D.Vb(),D.Wb(9,"mat-option",7),D.Qc(10,"Admins"),D.Vb(),D.Wb(11,"mat-option",8),D.Qc(12,"Supervisor"),D.Vb(),D.Wb(13,"mat-option",9),D.Qc(14,"Drivers"),D.Vb(),D.Wb(15,"mat-option",10),D.Qc(16,"Members"),D.Vb(),D.Vb(),D.Vb(),D.Vb(),D.Vb(),D.Vb()}if(2&t){const t=D.hc();D.Cb(6),D.oc("value",t.category)}}let q=(()=>{class t{constructor(t,i,o){this.userService=t,this.sessionQuery=i,this.dialogServices=o,this.caption="Drivers",this.columns=[{label:"Name",name:"name",sortable:!0},{label:"Email",name:"email",type:"email",sortable:!0},{label:"Phone",name:"phone",type:"phone",sortable:!0},{label:"Role",name:"role",sortable:!0},{label:"Access",name:"disabled",type:"status",sortable:!0}],this.actions=[{icon:"pencil",color:"warning",disable:!1}],this.toolBarActions=[{position:"right",action:[]},{position:"left",action:[{label:"Report",icon:"chart-bar",color:"",tooltip:null}]}],this.user$=this.sessionQuery.select(t=>t.user),this.category="driver",this.dialogConfig={width:"500px",formComponent:R,service:this.userService},this.dialogConfigReport={width:"95%",formComponent:W.a}}ngOnInit(){this.user$.subscribe(t=>{this.role=null==t?void 0:t.role,"supervisor"===(null==t?void 0:t.role)&&(this.actions=[])}),this.users$=this.onLoad("driver")}add(){this.dialogConfig.title="Add User",this.dialogConfig.formData=null,this.dialogConfig.lookupData={},this.dialogServices.handleDialog(this.dialogConfig)}update(t){this.dialogConfig.title="Update User",this.dialogConfig.formData=t,this.dialogConfig.lookupData={},this.dialogServices.handleDialog(this.dialogConfig)}report(){this.dialogConfigReport.title="driver",this.dialogConfigReport.lookupData={category:this.category},this.dialogServices.handleDialog(this.dialogConfigReport)}onChange(t){this.users$=this.onLoad(t.value)}onLoad(t){let i;return this.blockUI.start("Loading..."),i=this.userService.get("all"===t?null:t).snapshotChanges(),i.subscribe(t=>{this.blockUI.stop()}),i}onActionClick(t){"pencil"===t.type&&this.update(t.data)}onToolBarActionClick(t){"plus"===t?this.add():"chart-bar"===t&&this.report()}}return t.\u0275fac=function(i){return new(i||t)(D.Qb(B.a),D.Qb(O.a),D.Qb(x.a))},t.\u0275cmp=D.Kb({type:t,selectors:[["app-users"]],decls:3,vars:11,consts:[["class","card",4,"ngIf"],[3,"caption","columns","data","actions","first","rows","sortBy","toolBarActions","buttonClick","toolBarButtonClick"],[1,"card"],[1,"p-toolbar-group-left"],[1,"full-width"],[3,"value","valueChange","selectionChange"],["value","all"],["value","admin"],["value","supervisor"],["value","driver"],["value","member"]],template:function(t,i){1&t&&(D.Oc(0,j,17,1,"div",0),D.Wb(1,"app-table-template",1),D.ec("buttonClick",function(t){return i.onActionClick(t)})("toolBarButtonClick",function(t){return i.onToolBarActionClick(t)}),D.ic(2,"async"),D.Vb()),2&t&&(D.oc("ngIf","supervisor"!==i.role),D.Cb(1),D.oc("caption",i.caption)("columns",i.columns)("data",D.jc(2,9,i.users$))("actions",i.actions)("first",(null==i.currentPage?null:i.currentPage.first)||0)("rows",(null==i.currentPage?null:i.currentPage.rows)||10)("sortBy",i.sortBy)("toolBarActions",i.toolBarActions))},directives:[y.m,P.a,e.a,u.c,u.g,r.a,M.i],pipes:[y.b],styles:[""]}),Object(V.__decorate)([Object(A.a)()],t.prototype,"blockUI",void 0),t})();var N=o("tyNb");const I=[{path:"",component:q},{path:"**",redirectTo:""}];let U=(()=>{class t{}return t.\u0275mod=D.Ob({type:t}),t.\u0275inj=D.Nb({factory:function(i){return new(i||t)},imports:[[N.e.forChild(I)],N.e]}),t})(),E=(()=>{class t{}return t.\u0275mod=D.Ob({type:t}),t.\u0275inj=D.Nb({factory:function(i){return new(i||t)},imports:[[y.c,U,C.a,v.f,f.k,f.v,g.b,h.c,m.b,e.b,p.a,d.f,u.e,b.c,c.b,r.b,l.b,s.i,n.a,a.a]]}),t})()}}]);