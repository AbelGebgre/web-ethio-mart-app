(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{Ao8N:function(t,o,e){"use strict";e.r(o),e.d(o,"ProductsModule",function(){return pt});var i=e("Xa2L"),n=e("/1cH"),c=e("iadO"),l=e("1jcm"),a=e("d3UM"),r=e("NFeN"),s=e("qFsG"),d=e("0IaG"),u=e("V5BG"),f=e("Q4Mo"),b=e("jIHw"),h=e("7kUa"),p=e("3Pt+"),m=e("rEr+"),g=e("PCNd"),C=e("ofXK"),y=e("mrSG"),v=e("7+5H"),k=e("4ZtF"),w=e("nnAt"),V=e("fXoL"),W=e("/zas"),O=e("UbJi"),I=e("otk6"),D=e("kmnG"),Q=e("FKr1"),S=e("xivw");function x(t,o){if(1&t&&(V.Wb(0,"mat-option",23),V.Qc(1),V.Vb()),2&t){const t=o.$implicit;V.oc("value",t.name),V.Cb(1),V.Sc(" ",t.name," ")}}function N(t,o){1&t&&(V.Wb(0,"mat-hint"),V.Qc(1,"changing choices you will lose your data! "),V.Vb())}function M(t,o){if(1&t&&(V.Wb(0,"mat-error",24),V.Qc(1),V.Vb()),2&t){const t=V.hc();V.Cb(1),V.Rc(t.displayMessage.name)}}function j(t,o){1&t&&(V.Wb(0,"span",24),V.Qc(1,"*"),V.Vb())}function P(t,o){if(1&t){const t=V.Xb();V.Wb(0,"mat-form-field",7),V.Wb(1,"mat-label",27),V.Qc(2),V.Oc(3,j,2,0,"span",11),V.Vb(),V.Wb(4,"input",28),V.ec("input",function(o){return V.Ec(t),V.hc(2).keyDown(o,"email")})("keydown",function(o){return V.Ec(t),V.hc(2).keyDown(o,"email")}),V.Vb(),V.Vb()}if(2&t){const t=V.hc().index,o=V.hc();V.Cb(2),V.Sc(" ",o.fieldControls[t].label," "),V.Cb(1),V.oc("ngIf",o.fieldControls[t].required),V.Cb(1),V.oc("formControlName",o.fieldControls[t].name)}}function E(t,o){1&t&&(V.Wb(0,"span",24),V.Qc(1,"*"),V.Vb())}function _(t,o){if(1&t){const t=V.Xb();V.Wb(0,"mat-form-field",7),V.Wb(1,"mat-label",27),V.Qc(2),V.Oc(3,E,2,0,"span",11),V.Vb(),V.Wb(4,"input",29),V.ec("input",function(o){return V.Ec(t),V.hc(2).keyDown(o,"int")})("keydown",function(o){return V.Ec(t),V.hc(2).keyDown(o,"int")}),V.Vb(),V.Vb()}if(2&t){const t=V.hc().index,o=V.hc();V.Cb(2),V.Sc(" ",o.fieldControls[t].label," "),V.Cb(1),V.oc("ngIf",o.fieldControls[t].required),V.Cb(1),V.oc("formControlName",o.fieldControls[t].name)}}function A(t,o){1&t&&(V.Wb(0,"span",24),V.Qc(1,"*"),V.Vb())}function F(t,o){if(1&t){const t=V.Xb();V.Wb(0,"mat-form-field",7),V.Wb(1,"mat-label",27),V.Qc(2),V.Oc(3,A,2,0,"span",11),V.Vb(),V.Wb(4,"input",29),V.ec("input",function(o){return V.Ec(t),V.hc(2).keyDown(o,"price")})("keydown",function(o){return V.Ec(t),V.hc(2).keyDown(o,"price")}),V.Vb(),V.Vb()}if(2&t){const t=V.hc().index,o=V.hc();V.Cb(2),V.Sc(" ",o.fieldControls[t].label," "),V.Cb(1),V.oc("ngIf",o.fieldControls[t].required),V.Cb(1),V.oc("formControlName",o.fieldControls[t].name)}}function B(t,o){1&t&&(V.Wb(0,"span",24),V.Qc(1,"*"),V.Vb())}function q(t,o){if(1&t){const t=V.Xb();V.Wb(0,"mat-form-field",7),V.Wb(1,"mat-label",27),V.Qc(2),V.Oc(3,B,2,0,"span",11),V.Vb(),V.Wb(4,"input",28),V.ec("input",function(o){return V.Ec(t),V.hc(2).keyDown(o,"date")})("keydown",function(o){return V.Ec(t),V.hc(2).keyDown(o,"date")}),V.Vb(),V.Vb()}if(2&t){const t=V.hc().index,o=V.hc();V.Cb(2),V.Sc(" ",o.fieldControls[t].label," "),V.Cb(1),V.oc("ngIf",o.fieldControls[t].required),V.Cb(1),V.oc("formControlName",o.fieldControls[t].name)}}function G(t,o){1&t&&(V.Wb(0,"span",24),V.Qc(1,"*"),V.Vb())}function X(t,o){if(1&t){const t=V.Xb();V.Wb(0,"mat-form-field",7),V.Wb(1,"mat-label",27),V.Qc(2),V.Oc(3,G,2,0,"span",11),V.Vb(),V.Wb(4,"input",28),V.ec("input",function(o){return V.Ec(t),V.hc(2).keyDown(o,"phone")})("keydown",function(o){return V.Ec(t),V.hc(2).keyDown(o,"phone")}),V.Vb(),V.Vb()}if(2&t){const t=V.hc().index,o=V.hc();V.Cb(2),V.Sc(" ",o.fieldControls[t].label," "),V.Cb(1),V.oc("ngIf",o.fieldControls[t].required),V.Cb(1),V.oc("formControlName",o.fieldControls[t].name)}}function R(t,o){1&t&&(V.Wb(0,"span",24),V.Qc(1,"*"),V.Vb())}function T(t,o){if(1&t){const t=V.Xb();V.Wb(0,"mat-form-field",7),V.Wb(1,"mat-label",27),V.Qc(2),V.Oc(3,R,2,0,"span",11),V.Vb(),V.Wb(4,"input",28),V.ec("input",function(o){return V.Ec(t),V.hc(2).keyDown(o,"text")})("keydown",function(o){return V.Ec(t),V.hc(2).keyDown(o,"text")}),V.Vb(),V.Vb()}if(2&t){const t=V.hc().index,o=V.hc();V.Cb(2),V.Sc(" ",o.fieldControls[t].label," "),V.Cb(1),V.oc("ngIf",o.fieldControls[t].required),V.Cb(1),V.oc("formControlName",o.fieldControls[t].name)}}function U(t,o){1&t&&(V.Wb(0,"span",24),V.Qc(1,"*"),V.Vb())}function z(t,o){if(1&t){const t=V.Xb();V.Wb(0,"textarea",31),V.ec("input",function(o){return V.Ec(t),V.hc(3).keyDown(o,"text")})("keydown",function(o){return V.Ec(t),V.hc(3).keyDown(o,"text")}),V.Vb()}if(2&t){const t=V.hc(2).index,o=V.hc();V.oc("formControlName",o.fieldControls[t].name)}}function H(t,o){if(1&t&&(V.Wb(0,"mat-form-field",7),V.Wb(1,"mat-label",27),V.Qc(2),V.Oc(3,U,2,0,"span",11),V.Vb(),V.Oc(4,z,1,1,"textarea",30),V.Vb()),2&t){const t=V.hc().index,o=V.hc();V.Cb(2),V.Sc(" ",o.fieldControls[t].label," "),V.Cb(1),V.oc("ngIf",o.fieldControls[t].required),V.Cb(1),V.oc("ngIf",""===o.fieldControls[t].type)}}function K(t,o){1&t&&(V.Wb(0,"span",24),V.Qc(1,"*"),V.Vb())}function $(t,o){if(1&t&&(V.Wb(0,"mat-option",23),V.Wb(1,"span"),V.Qc(2),V.Vb(),V.Vb()),2&t){const t=o.$implicit;V.oc("value",null==t?null:t.name),V.Cb(2),V.Rc(t.name)}}function J(t,o){if(1&t&&(V.Wb(0,"mat-form-field",7),V.Wb(1,"mat-label",27),V.Qc(2),V.Oc(3,K,2,0,"span",11),V.Vb(),V.Wb(4,"mat-select",32),V.Oc(5,$,3,2,"mat-option",9),V.Vb(),V.Vb()),2&t){const t=V.hc().index,o=V.hc();V.Cb(2),V.Sc(" ",o.fieldControls[t].label," "),V.Cb(1),V.oc("ngIf",o.fieldControls[t].required),V.Cb(1),V.oc("formControlName",o.fieldControls[t].name),V.Cb(1),V.oc("ngForOf",null==o.fieldControls[t]?null:o.fieldControls[t].options)}}function L(t,o){if(1&t){const t=V.Xb();V.Wb(0,"div",7),V.Wb(1,"app-file-upload-template",33),V.ec("fileDropped",function(o){return V.Ec(t),V.hc(2).getFile(o)}),V.Vb(),V.Vb()}if(2&t){const t=V.hc(2);V.Cb(1),V.oc("uploadedFile",t.image)}}function Z(t,o){if(1&t&&(V.Wb(0,"div",25),V.Oc(1,P,5,3,"mat-form-field",26),V.Oc(2,_,5,3,"mat-form-field",26),V.Oc(3,F,5,3,"mat-form-field",26),V.Oc(4,q,5,3,"mat-form-field",26),V.Oc(5,X,5,3,"mat-form-field",26),V.Oc(6,T,5,3,"mat-form-field",26),V.Oc(7,H,5,3,"mat-form-field",26),V.Oc(8,J,6,4,"mat-form-field",26),V.Oc(9,L,2,1,"div",26),V.Vb()),2&t){const t=o.index,e=V.hc();V.oc("formGroupName",0),V.Cb(1),V.oc("ngIf","email"===e.fieldControls[t].type),V.Cb(1),V.oc("ngIf","number"===e.fieldControls[t].type),V.Cb(1),V.oc("ngIf","price"===e.fieldControls[t].type||"float"===e.fieldControls[t].type),V.Cb(1),V.oc("ngIf","date"===e.fieldControls[t].type),V.Cb(1),V.oc("ngIf","phone"===e.fieldControls[t].type),V.Cb(1),V.oc("ngIf","text"===e.fieldControls[t].type),V.Cb(1),V.oc("ngIf","textarea"===e.fieldControls[t].type),V.Cb(1),V.oc("ngIf","dropdown"===e.fieldControls[t].type),V.Cb(1),V.oc("ngIf","file"===e.fieldControls[t].type)}}const Y=function(){return{standalone:!0}};let tt=(()=>{class t{constructor(t,o,e,i,n){var c,l,a,r,s,d,u,f,b,h,m,g,C;this.fb=t,this.sessionQuery=o,this.auth=e,this.fun=i,this.config=n,this.formSubmit=new V.o,this.formClose=new V.o,this.isPublished=!1,this.fieldControls=[],this.selectedCategory=[],this.file=[],this.displayMessage={},this.category=null===(c=this.config.lookupData)||void 0===c?void 0:c.category,this.image=Object(k.k)(null===(l=this.config.formData)||void 0===l?void 0:l.image)?null===(a=this.config.formData)||void 0===a?void 0:a.image:Object(k.p)(null===(r=this.config.formData)||void 0===r?void 0:r.image)?[null===(s=this.config.formData)||void 0===s?void 0:s.image]:[],this.isPublished=(null===(d=this.config.formData)||void 0===d?void 0:d.status)||!0,this.id=null===(u=this.config.formData)||void 0===u?void 0:u.id,this.category.subscribe(t=>{var o;this.selectedCategory=t,null!==this.id&&this.change(null===(o=this.config.formData)||void 0===o?void 0:o.category)}),this.form=this.fb.group({id:this.id,additional_fields:this.fb.group({fields:this.fb.array([new p.h({})])}),category:[null===(f=this.config.formData)||void 0===f?void 0:f.category,p.x.required],status:[this.isPublished,p.x.required],user:(null===(b=this.config.formData)||void 0===b?void 0:b.user)||(null===(m=null===(h=this.sessionQuery)||void 0===h?void 0:h.user)||void 0===m?void 0:m.name),uid:(null===(g=this.config.formData)||void 0===g?void 0:g.uid)||null,created_at:null===(C=this.config.formData)||void 0===C?void 0:C.created_at}),this.validationMessages={category:{required:"field is required."}},this.genericValidator=new w.a(this.validationMessages)}get fields(){return this.form.controls.additional_fields.get("fields")}ngOnInit(){this.auth.user.subscribe(t=>{this.uid=null==t?void 0:t.uid}),this.form.valueChanges.subscribe(()=>this.displayMessage=this.genericValidator.processMessages(this.form))}blur(){this.displayMessage=this.genericValidator.processMessages(this.form)}keyDown(t,o){return t.key?this.fun.allowedKey(t.key,o):(t.target.value=this.fun.removeNotAllowedKey(t.target.value,o),!0)}change(t){var o,e;const i=null===(o=this.selectedCategory.filter(o=>o.name===t)[0])||void 0===o?void 0:o.fields;this.detail=null===(e=this.selectedCategory.filter(o=>o.name===t)[0])||void 0===e?void 0:e.Details,this.fields.removeAt(0),this.fieldControls=[];const n=new p.h({});i&&i.forEach(t=>{var o;const e=[];"email"===t.type&&e.push(p.x.email),t.required&&e.push(p.x.required);const i=e.length>0?[...e]:null;this.fieldControls.push(t),n.addControl(t.name,this.fb.control((null===(o=this.config)||void 0===o?void 0:o.formData[t.name])||t.default,i))}),this.fields.push(n)}getFile(t){this.file=(null==t?void 0:t.upload.length)>0?null==t?void 0:t.upload:[]}onSubmit(){const t=this.fieldControls.filter(t=>"file"===t.type);t.length>0&&this.file.length>0&&(this.form.value.additional_fields.fields[0][t[0].name]=this.file);const o=Object(y.__rest)(this.form.value,[]),e=Object.assign({},o.additional_fields.fields[0]),i=Object(y.__rest)(e,[]);delete o.additional_fields;const n=Object.assign(Object.assign(Object.assign({},i),o),{uid:null===o.uid?this.uid:o.uid,Details:this.detail||null,status:this.isPublished});this.formSubmit.emit(n)}onCancel(){this.formClose.emit()}}return t.\u0275fac=function(o){return new(o||t)(V.Qb(p.e),V.Qb(W.a),V.Qb(O.a),V.Qb(I.a),V.Qb(d.a))},t.\u0275cmp=V.Kb({type:t,selectors:[["app-product-form"]],outputs:{formSubmit:"formSubmit",formClose:"formClose"},decls:36,vars:12,consts:[["autocomplete","off",3,"formGroup","submit"],["mat-dialog-title","",1,"p-dialog-header","p-d-flex","p-jc-lg-between",2,"padding","0.2re 0.3rem"],[1,"p-dialog-title","capitalize"],["pButton","","pRipple","","icon","pi pi-times",1,"shadow-none","p-button-rounded","p-button-plain","p-button-text","p-mr-1",3,"click"],["mat-dialog-content","",1,"p-dialog-content"],[1,"p-grid"],[1,"p-col-12"],[1,"full-width"],["formControlName","category",3,"closed","valueChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["class","error",4,"ngIf"],["formGroupName","additional_fields",1,"p-col-12"],["formArrayName","fields"],[3,"formGroupName",4,"ngFor","ngForOf"],["color","primary","forControlName","status",1,"example-section",3,"ngModel","ngModelOptions","ngModelChange"],["mat-dialog-actions","",1,"p-dialog-footer","button-row"],["pbutton","","pripple","","label","Cancel","type","button","icon","pi pi-times",1,"p-button-text","p-ripple","p-button","p-component","shadow-none","p-mr-2",3,"click"],["aria-hidden","true",1,"p-button-icon","p-button-icon-left","pi","pi-times"],[1,"p-button-label"],[1,"p-ink"],["pbutton","","pripple","","label","Save","icon","pi pi-check","type","submit",1,"p-button-text","p-ripple","p-button","p-component","shadow-none",3,"disabled"],["aria-hidden","true",1,"p-button-icon","p-button-icon-left","pi","pi-check"],[3,"value"],[1,"error"],[3,"formGroupName"],["class","full-width",4,"ngIf"],[1,"capitalize"],["matInput","","type","text","value","",3,"formControlName","input","keydown"],["matInput","","type","number","value","",3,"formControlName","input","keydown"],["matInput","","rows","2","type","text","value","",3,"formControlName","input","keydown",4,"ngIf"],["matInput","","rows","2","type","text","value","",3,"formControlName","input","keydown"],[3,"formControlName"],[3,"uploadedFile","fileDropped"]],template:function(t,o){1&t&&(V.Wb(0,"form",0),V.ec("submit",function(){return o.onSubmit()}),V.Wb(1,"div",1),V.Wb(2,"div",2),V.Qc(3),V.Vb(),V.Wb(4,"button",3),V.ec("click",function(){return o.onCancel()}),V.Vb(),V.Vb(),V.Wb(5,"div",4),V.Wb(6,"div",5),V.Wb(7,"div",6),V.Wb(8,"mat-form-field",7),V.Wb(9,"mat-label"),V.Qc(10,"Category"),V.Vb(),V.Wb(11,"mat-select",8),V.ec("closed",function(){return o.blur()})("valueChange",function(t){return o.change(t)}),V.Oc(12,x,2,2,"mat-option",9),V.ic(13,"async"),V.Vb(),V.Oc(14,N,2,0,"mat-hint",10),V.Oc(15,M,2,1,"mat-error",11),V.Vb(),V.Vb(),V.Wb(16,"div",12),V.Wb(17,"div",13),V.Oc(18,Z,10,10,"div",14),V.Vb(),V.Vb(),V.Wb(19,"mat-slide-toggle",15),V.ec("ngModelChange",function(t){return o.isPublished=t}),V.Wb(20,"span"),V.Qc(21,"Status"),V.Vb(),V.Rb(22,"br"),V.Wb(23,"mat-hint"),V.Qc(24,"block or allow product from displaying"),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(25,"div",16),V.Wb(26,"button",17),V.ec("click",function(){return o.onCancel()}),V.Rb(27,"span",18),V.Wb(28,"span",19),V.Qc(29,"Cancel"),V.Vb(),V.Rb(30,"span",20),V.Vb(),V.Wb(31,"button",21),V.Rb(32,"span",22),V.Wb(33,"span",19),V.Qc(34,"Save"),V.Vb(),V.Rb(35,"span",20),V.Vb(),V.Vb(),V.Vb()),2&t&&(V.oc("formGroup",o.form),V.Cb(3),V.Rc(o.config.title),V.Cb(9),V.oc("ngForOf",V.jc(13,9,o.category)),V.Cb(2),V.oc("ngIf",null===o.id),V.Cb(1),V.oc("ngIf",o.displayMessage.name),V.Cb(3),V.oc("ngForOf",o.fieldControls),V.Cb(1),V.oc("ngModel",o.isPublished)("ngModelOptions",V.rc(11,Y)),V.Cb(12),V.oc("disabled",!o.form.valid))},directives:[p.y,p.r,p.i,d.g,b.b,f.a,d.e,D.c,D.g,a.a,p.q,p.g,C.l,C.m,p.j,p.d,l.a,p.t,D.f,d.c,Q.i,D.b,s.b,p.c,p.u,S.a],pipes:[C.b],styles:[".example-section[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;height:60px}"]}),t})();var ot=e("12jx"),et=e("lJxs"),it=e("sSZD"),nt=e("I/3d");let ct=(()=>{let t=class extends k.b{constructor(){super()}};return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=V.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t=Object(y.__decorate)([Object(k.i)({name:"products",resettable:!0})],t),t})(),lt=(()=>{class t{constructor(t,o,e,i){this.db=t,this.firestore=o,this.store=e,this.fun=i,this.url="/Product"}get(t=null){const o=""+this.url;return t?this.firestore.collection(o).doc(t).collection(t+"s"):this.firestore.collection(o).auditTrail().pipe(Object(et.a)(t=>{const o=[];t.map(t=>{var e,i;const n=null===(i=null===(e=t.payload)||void 0===e?void 0:e.doc)||void 0===i?void 0:i.id,c=t.payload.doc.data();this.fitch(n).subscribe(t=>{const e=t.map(t=>{var o,e,i,c;return Object.assign({id:null===(e=null===(o=t.payload)||void 0===o?void 0:o.doc)||void 0===e?void 0:e.id,category:n,showMore:!1},null===(c=null===(i=t.payload)||void 0===i?void 0:i.doc)||void 0===c?void 0:c.data())});o.push({id:n,category:n,details:c||"",items:e.length,data:e});const i=[...new Map(o.map(t=>[t.id,t])).values()];this.store.set(i)})})}))}add(t,o=null){var e;delete t.id;const i=[],n=""+this.url;return(null===(e=null==t?void 0:t.image)||void 0===e?void 0:e.length)>0?t.image.forEach((e,c)=>this.fun.storeToFirebase(e,this.url).then(e=>{if(i.push(e),c+1===t.image.length)return t.image=i,t.created_at=(new Date).toISOString(),this.firestore.collection(n).doc(t.category).collection(t.category+"s").add(t).then(t=>{this.get(),this.fun.notify("Added"),o.ref.close(),o.block.stop()}).catch(t=>{o.block.stop(),this.fun.notify("","Something error occur",3e3)});c++}).catch(t=>{o.block.stop(),this.fun.notify("","Something error occur",3e3)})):(t.created_at=(new Date).toISOString(),this.firestore.collection(n).doc(t.category).collection(t.category+"s").add(t).then(t=>{this.get(),this.fun.notify("Added"),o.ref.close(),o.block.stop()}).catch(t=>{o.block.stop(),this.fun.notify("","Something error occur",3e3)}))}update(t,o,e=null){var i;delete o.id;let n=0;const c=[];return(null===(i=null==o?void 0:o.image)||void 0===i?void 0:i.length)>0?o.image.forEach((i,l)=>null==(null==i?void 0:i.url)?this.fun.storeToFirebase(i,this.url).then(i=>{if(c.push(i),n++,l+1===o.image.length)return o.image=c,this.firestore.collection(this.url).doc(o.category).collection(o.category+"s").doc(t).update(o).then(t=>{this.get(),this.fun.notify("Updated"),e.ref.close(),e.block.stop()}).catch(t=>{e.block.stop(),this.fun.notify("","Something error occur",3e3)});l++}).catch(t=>{e.block.stop(),this.fun.notify("","Something error occur",3e3)}):(c.push(null==i?void 0:i.url),0===n?(o.image=c,this.firestore.collection(this.url).doc(o.category).collection(o.category+"s").doc(t).update(o).then(t=>{this.get(),this.fun.notify("Update"),e.ref.close(),e.block.stop()}).catch(t=>{e.block.stop(),this.fun.notify("","Something error occur",3e3)})):void 0)):this.firestore.collection(this.url).doc(o.category).collection(o.category+"s").doc(t).update(o).then(t=>{this.get(),this.fun.notify("Update"),e.ref.close(),e.block.stop()}).catch(t=>{e.block.stop(),this.fun.notify("","Something error occur",3e3)})}delete(t,o=null){return this.firestore.collection(this.url).doc(o).collection(o+"s").doc(t).delete().finally(()=>{this.get()})}fitch(t){return this.firestore.collection(this.url).doc(t).collection(t+"s").snapshotChanges()}}return t.\u0275fac=function(o){return new(o||t)(V.ac(it.a),V.ac(nt.a),V.ac(ct),V.ac(I.a))},t.\u0275prov=V.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),at=(()=>{let t=class extends k.f{constructor(t){super(t),this.store=t}};return t.\u0275fac=function(o){return new(o||t)(V.ac(ct))},t.\u0275prov=V.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t=Object(y.__decorate)([Object(k.e)({sortBy:"id",sortByOrder:k.c.DESC})],t),t})();var rt=e("GaOe"),st=e("H0VJ"),dt=e("WLRH");let ut=(()=>{class t{constructor(t,o,e,i,n){this.productService=t,this.productsQuery=o,this.fun=e,this.categoryService=i,this.dialogServices=n,this.caption="Products",this.columns=[{label:"Category",name:"category",sortable:!0},{label:"Detail",name:"details",sortable:!1},{label:"Items",name:"items",type:"link",sortable:!0}],this.actions=[],this.toolBarActions=[{position:"right",action:[]},{position:"left",action:[{label:"Create",icon:"plus",color:"",tooltip:null}]}],this.product$=this.productsQuery.selectAll(),this.loading$=this.productsQuery.selectLoading(),this.dialogConfig={width:"540px",formComponent:tt,service:this.productService},this.dialogConfigModal={closable:!0,formComponent:v.a}}ngOnInit(){var t;this.stateHistory=new k.g(this.productsQuery),null===(t=this.productService.get())||void 0===t||t.subscribe(),this.category=this.categoryService.get().valueChanges()}add(t=null){this.dialogConfig.title="New product",this.dialogConfig.formData=null!==t?t:"",this.dialogConfig.lookupData={category:this.category},this.dialogServices.handleDialog(this.dialogConfig)}update(t){this.dialogConfig.title="Edit product",this.dialogConfig.formData=t,this.dialogConfig.lookupData={category:this.category},this.dialogServices.handleDialog(this.dialogConfig)}onActionClick(t){"pencil"===t.type?this.update(t.data):"trash"===t.type?this.productService.delete(t.data.id,t.data.category).then(this.blockUI.stop()):"link"===t.type&&this.showModalTable(t.data)}showModalTable(t){const o=t.category,e="Vehicle"===o?["Name","Model","Color","Price","images","Condition","Transemission","Contact"]:"Home"===o?["Name","Property address","Number of bedrooms","Number of bathrooms","Price","images","furnishing","property size"]:"Furniture"===o?["Name","Price","Item Quantity","images","Item Description","Contact","Size"]:"Fashion"===o?["Name","Price","Item Quantity","images","Item Description","Item Type","Contact","Size"]:"Gift"===o?["Name","Price","Item Quantity","images","Item Description"]:"Sport"===o?["Name","Price","images","Size","Item Description","Item Quantity"]:null;this.blockUI.stop(),this.dialogConfigModal.width="1400px",this.dialogConfigModal.lookupData={caption:t.category,columns:this.fun.getColumns(null!==e?e:Object.keys(t.data[0])),data:t.data,actions:[{icon:"pencil",color:"warning",disable:!1},{icon:"trash",color:"danger"}],toolBarActions:[]};const i=this.dialogServices.handleDialog(this.dialogConfigModal);this.handleModalChange(i)}handleModalChange(t){var o,e;null===(e=null===(o=t.componentInstance)||void 0===o?void 0:o.modalAction)||void 0===e||e.subscribe(o=>{this.onActionClick(o),this.product$.subscribe(e=>{var i;const n=null===(i=null==o?void 0:o.data)||void 0===i?void 0:i.category,c=e.filter(t=>t.id===n);t.componentInstance.data=c[0].data})})}onToolBarActionClick(t){"plus"===t?this.add():""!==t.split(",")[1]&&this.add({category:t.split(",")[0]})}}return t.\u0275fac=function(o){return new(o||t)(V.Qb(lt),V.Qb(at),V.Qb(I.a),V.Qb(rt.a),V.Qb(st.a))},t.\u0275cmp=V.Kb({type:t,selectors:[["app-product"]],decls:2,vars:11,consts:[[3,"caption","columns","data","actions","first","rows","sortBy","hasGrouped","toolBarActions","buttonClick","toolBarButtonClick"]],template:function(t,o){1&t&&(V.Wb(0,"app-table-template",0),V.ec("buttonClick",function(t){return o.onActionClick(t)})("toolBarButtonClick",function(t){return o.onToolBarActionClick(t)}),V.ic(1,"async"),V.Vb()),2&t&&V.oc("caption",o.caption)("columns",o.columns)("data",V.jc(1,9,o.product$))("actions",o.actions)("first",(null==o.currentPage?null:o.currentPage.first)||0)("rows",(null==o.currentPage?null:o.currentPage.rows)||10)("sortBy",o.sortBy)("hasGrouped",!0)("toolBarActions",o.toolBarActions)},directives:[dt.a],pipes:[C.b],styles:[""]}),Object(y.__decorate)([Object(ot.a)()],t.prototype,"blockUI",void 0),t})();var ft=e("tyNb");const bt=[{path:"",component:ut},{path:"**",redirectTo:""}];let ht=(()=>{class t{}return t.\u0275mod=V.Ob({type:t}),t.\u0275inj=V.Nb({factory:function(o){return new(o||t)},imports:[[ft.e.forChild(bt)],ft.e]}),t})(),pt=(()=>{class t{}return t.\u0275mod=V.Ob({type:t}),t.\u0275inj=V.Nb({factory:function(o){return new(o||t)},imports:[[C.c,ht,g.a,m.f,p.k,p.v,h.b,b.c,f.b,u.a,d.f,D.e,s.c,r.b,a.b,l.b,c.i,n.a,i.a]]}),t})()}}]);