(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{AVRW:function(t,e,i){"use strict";i.r(e),i.d(e,"UsersModule",function(){return U});var o=i("5EWq"),n=i("Xa2L"),a=i("/1cH"),s=i("iadO"),l=i("1jcm"),r=i("d3UM"),c=i("NFeN"),b=i("qFsG"),u=i("kmnG"),d=i("0IaG"),p=i("V5BG"),m=i("Q4Mo"),h=i("jIHw"),f=i("7kUa"),g=i("3Pt+"),v=i("rEr+"),C=i("PCNd"),V=i("ofXK"),W=i("mrSG"),y=i("4ZtF"),k=i("nnAt"),w=i("fXoL"),Q=i("otk6"),D=i("FKr1");const M=function(){return{standalone:!0}};let A=(()=>{class t{constructor(t,e,i){var o,n,a,s,l,r,c,b,u,d,p,m,h;this.fb=t,this.fun=e,this.config=i,this.formSubmit=new w.o,this.formClose=new w.o,this.isPublished=!1,this.isEnabled=!1,this.displayMessage={},this.category=null===(o=this.config.lookupData)||void 0===o?void 0:o.category,this.image=Object(y.k)(null===(n=this.config.formData)||void 0===n?void 0:n.image)?null===(a=this.config.formData)||void 0===a?void 0:a.image:Object(y.p)(null===(s=this.config.formData)||void 0===s?void 0:s.image)?[null===(l=this.config.formData)||void 0===l?void 0:l.image]:[],this.isPublished=void 0===(null===(r=this.config.formData)||void 0===r?void 0:r.disabled)||!(null===(c=this.config.formData)||void 0===c?void 0:c.disabled),this.form=this.fb.group({id:null===(b=this.config.formData)||void 0===b?void 0:b.id,role:(null===(u=this.config.formData)||void 0===u?void 0:u.role)||"driver",phone:(null===(d=this.config.formData)||void 0===d?void 0:d.phone)||"",name:[(null===(p=this.config.formData)||void 0===p?void 0:p.name)||"",g.x.required],email:[(null===(m=this.config.formData)||void 0===m?void 0:m.email)||"",[g.x.required,g.x.email]],disabled:[this.isPublished,g.x.required],created_at:null===(h=this.config.formData)||void 0===h?void 0:h.created_at}),this.validationMessages={name:{required:"field is required."},email:{required:"field is required.",email:"incorrect email"},phone:{minlength:"field has few character"}},this.genericValidator=new k.a(this.validationMessages)}ngOnInit(){this.form.valueChanges.subscribe(()=>this.displayMessage=this.genericValidator.processMessages(this.form))}blur(){this.displayMessage=this.genericValidator.processMessages(this.form)}keyDown(t,e){return t.key?this.fun.allowedKey(t.key,e):(t.target.value=this.fun.removeNotAllowedKey(t.target.value,e),!0)}getFile(t){this.form.controls.image.setValue((null==t?void 0:t.upload.length)>0?null==t?void 0:t.upload:[])}onSubmit(){const t=Object.assign(Object.assign({},this.form.value),{disabled:!this.isPublished});this.formSubmit.emit(t)}onCancel(){this.formClose.emit()}}return t.\u0275fac=function(e){return new(e||t)(w.Qb(g.e),w.Qb(Q.a),w.Qb(d.a))},t.\u0275cmp=w.Kb({type:t,selectors:[["app-users-form"]],outputs:{formSubmit:"formSubmit",formClose:"formClose"},decls:38,vars:6,consts:[["autocomplete","off",3,"formGroup","submit"],["mat-dialog-title","",1,"p-dialog-header","p-d-flex","p-jc-lg-between",2,"padding","0.2re 0.3rem"],[1,"p-dialog-title","capitalize"],["pButton","","pRipple","","icon","pi pi-times",1,"shadow-none","p-button-rounded","p-button-plain","p-button-text","p-mr-1",3,"click"],["mat-dialog-content","",1,"p-dialog-content"],[1,"p-grid"],[1,"p-col-12"],[1,"full-width"],["formControlName","role",3,"blur"],["value","admin"],["value","supervisor"],["value","driver"],["value","member"],["color","primary","forControlName","disabled",1,"example-section",3,"ngModel","ngModelOptions","ngModelChange"],["mat-dialog-actions","",1,"p-dialog-footer","button-row"],["pbutton","","pripple","","label","Cancel","type","button","icon","pi pi-times",1,"p-button-text","p-ripple","p-button","p-component","shadow-none","p-mr-2",3,"click"],["aria-hidden","true",1,"p-button-icon","p-button-icon-left","pi","pi-times"],[1,"p-button-label"],[1,"p-ink"],["pbutton","","pripple","","label","Save","icon","pi pi-check","type","submit",1,"p-button-text","p-ripple","p-button","p-component","shadow-none",3,"disabled"],["aria-hidden","true",1,"p-button-icon","p-button-icon-left","pi","pi-check"]],template:function(t,e){1&t&&(w.Wb(0,"form",0),w.ec("submit",function(){return e.onSubmit()}),w.Wb(1,"div",1),w.Wb(2,"div",2),w.Qc(3),w.Vb(),w.Wb(4,"button",3),w.ec("click",function(){return e.onCancel()}),w.Vb(),w.Vb(),w.Wb(5,"div",4),w.Wb(6,"div",5),w.Wb(7,"div",6),w.Wb(8,"mat-form-field",7),w.Wb(9,"mat-label"),w.Qc(10,"Role"),w.Vb(),w.Wb(11,"mat-select",8),w.ec("blur",function(){return e.blur()}),w.Wb(12,"mat-option",9),w.Qc(13,"Admin"),w.Vb(),w.Wb(14,"mat-option",10),w.Qc(15,"Supervisor"),w.Vb(),w.Wb(16,"mat-option",11),w.Qc(17,"Driver"),w.Vb(),w.Wb(18,"mat-option",12),w.Qc(19,"Member"),w.Vb(),w.Vb(),w.Vb(),w.Vb(),w.Wb(20,"mat-slide-toggle",13),w.ec("ngModelChange",function(t){return e.isPublished=t}),w.Wb(21,"span"),w.Qc(22,"Access"),w.Vb(),w.Rb(23,"br"),w.Wb(24,"mat-hint"),w.Qc(25,"block or allow users"),w.Vb(),w.Vb(),w.Rb(26,"br"),w.Vb(),w.Vb(),w.Wb(27,"div",14),w.Wb(28,"button",15),w.ec("click",function(){return e.onCancel()}),w.Rb(29,"span",16),w.Wb(30,"span",17),w.Qc(31,"Cancel"),w.Vb(),w.Rb(32,"span",18),w.Vb(),w.Wb(33,"button",19),w.Rb(34,"span",20),w.Wb(35,"span",17),w.Qc(36,"Save"),w.Vb(),w.Rb(37,"span",18),w.Vb(),w.Vb(),w.Vb()),2&t&&(w.oc("formGroup",e.form),w.Cb(3),w.Rc(e.config.title),w.Cb(17),w.oc("ngModel",e.isPublished)("ngModelOptions",w.rc(5,M)),w.Cb(13),w.oc("disabled",!e.form.valid))},directives:[g.y,g.r,g.i,d.g,h.b,m.a,d.e,u.c,u.g,r.a,g.q,g.g,D.i,l.a,g.t,u.f,d.c],styles:[".example-section[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;height:60px}"]}),t})();var S=i("12jx"),B=i("SRE/"),O=i("/zas"),x=i("H0VJ"),P=i("WLRH");function j(t,e){if(1&t){const t=w.Xb();w.Wb(0,"div",2),w.Wb(1,"p-toolbar"),w.Wb(2,"div",3),w.Wb(3,"mat-form-field",4),w.Wb(4,"mat-label"),w.Qc(5,"Category"),w.Vb(),w.Wb(6,"mat-select",5),w.ec("selectionChange",function(e){return w.Ec(t),w.hc().onChange(e)}),w.Wb(7,"mat-option",6),w.Qc(8,"All"),w.Vb(),w.Wb(9,"mat-option",7),w.Qc(10,"Admins"),w.Vb(),w.Wb(11,"mat-option",8),w.Qc(12,"Supervisor"),w.Vb(),w.Wb(13,"mat-option",9),w.Qc(14,"Drivers"),w.Vb(),w.Wb(15,"mat-option",10),w.Qc(16,"Members"),w.Vb(),w.Vb(),w.Vb(),w.Vb(),w.Vb(),w.Vb()}2&t&&(w.Cb(6),w.oc("value","driver"))}let R=(()=>{class t{constructor(t,e,i){this.userService=t,this.sessionQuery=e,this.dialogServices=i,this.caption="Drivers",this.columns=[{label:"Name",name:"name",sortable:!0},{label:"Email",name:"email",type:"email",sortable:!0},{label:"Phone",name:"phone",type:"phone",sortable:!0},{label:"Role",name:"role",sortable:!0},{label:"Access",name:"disabled",type:"status",sortable:!0}],this.actions=[{icon:"pencil",color:"warning",disable:!1}],this.toolBarActions=[],this.user$=this.sessionQuery.select(t=>t.user),this.dialogConfig={width:"500px",formComponent:A,service:this.userService}}ngOnInit(){this.user$.subscribe(t=>{this.role=null==t?void 0:t.role,"supervisor"===(null==t?void 0:t.role)&&(this.actions=[],this.toolBarActions=[])}),this.users$=this.onLoad("driver")}add(){this.dialogConfig.title="Add User",this.dialogConfig.formData=null,this.dialogConfig.lookupData={},this.dialogServices.handleDialog(this.dialogConfig)}update(t){this.dialogConfig.title="Update User",this.dialogConfig.formData=t,this.dialogConfig.lookupData={},this.dialogServices.handleDialog(this.dialogConfig)}onChange(t){this.users$=this.onLoad(t.value)}onLoad(t){let e;return this.blockUI.start("Loading..."),e=this.userService.get("all"===t?null:t).snapshotChanges(),e.subscribe(t=>{this.blockUI.stop()}),e}onActionClick(t){"pencil"===t.type&&this.update(t.data)}onToolBarActionClick(t){"plus"===t&&this.add()}}return t.\u0275fac=function(e){return new(e||t)(w.Qb(B.a),w.Qb(O.a),w.Qb(x.a))},t.\u0275cmp=w.Kb({type:t,selectors:[["app-users"]],decls:3,vars:11,consts:[["class","card",4,"ngIf"],[3,"caption","columns","data","actions","first","rows","sortBy","toolBarActions","buttonClick","toolBarButtonClick"],[1,"card"],[1,"p-toolbar-group-left"],[1,"full-width"],[3,"value","selectionChange"],["value","all"],["value","admin"],["value","supervisor"],["value","driver"],["value","member"]],template:function(t,e){1&t&&(w.Oc(0,j,17,1,"div",0),w.Wb(1,"app-table-template",1),w.ec("buttonClick",function(t){return e.onActionClick(t)})("toolBarButtonClick",function(t){return e.onToolBarActionClick(t)}),w.ic(2,"async"),w.Vb()),2&t&&(w.oc("ngIf","supervisor"!==e.role),w.Cb(1),w.oc("caption",e.caption)("columns",e.columns)("data",w.jc(2,9,e.users$))("actions",e.actions)("first",(null==e.currentPage?null:e.currentPage.first)||0)("rows",(null==e.currentPage?null:e.currentPage.rows)||10)("sortBy",e.sortBy)("toolBarActions",e.toolBarActions))},directives:[V.m,P.a,o.a,u.c,u.g,r.a,D.i],pipes:[V.b],styles:[""]}),Object(W.__decorate)([Object(S.a)()],t.prototype,"blockUI",void 0),t})();var q=i("tyNb");const N=[{path:"",component:R},{path:"**",redirectTo:""}];let I=(()=>{class t{}return t.\u0275mod=w.Ob({type:t}),t.\u0275inj=w.Nb({factory:function(e){return new(e||t)},imports:[[q.e.forChild(N)],q.e]}),t})(),U=(()=>{class t{}return t.\u0275mod=w.Ob({type:t}),t.\u0275inj=w.Nb({factory:function(e){return new(e||t)},imports:[[V.c,I,C.a,v.f,g.k,g.v,f.b,h.c,m.b,o.b,p.a,d.f,u.e,b.c,c.b,r.b,l.b,s.i,a.a,n.a]]}),t})()}}]);