(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"/2EW":function(t,o,e){"use strict";e.r(o),e.d(o,"NotificationModule",function(){return H});var i=e("5EWq"),n=e("Xa2L"),l=e("/1cH"),a=e("iadO"),s=e("1jcm"),r=e("d3UM"),c=e("NFeN"),u=e("qFsG"),d=e("kmnG"),p=e("0IaG"),b=e("V5BG"),h=e("Q4Mo"),m=e("jIHw"),f=e("7kUa"),g=e("3Pt+"),v=e("rEr+"),C=e("PCNd"),k=e("ofXK"),S=e("5o1E"),w=e("tyNb"),I=e("mrSG"),V=e("7+5H"),W=e("12jx"),y=e("fXoL"),_=e("H0VJ"),A=e("otk6"),O=e("tk/3"),x=e("xivw");let E=(()=>{class t{constructor(t,o,e,i){this.dialogServices=t,this.fun=o,this.http=e,this.config=i,this.formSubmit=new y.o,this.formImport=new y.o,this.formClose=new y.o,this.columns=[],this.oldColumns=[],this.data=[],this.length=0,this.dialogConfigModal={closable:!0,formComponent:V.a}}ngOnInit(){var t,o,e;this.oldColumns=(null===(t=this.config.lookupData)||void 0===t?void 0:t.columns)||[],this.width=(null===(o=this.config.lookupData)||void 0===o?void 0:o.width)||"800px",this.caption=null===(e=this.config.lookupData)||void 0===e?void 0:e.caption}getFile(t){var o,e;this.fileData=t,this.length=(null==t?void 0:t.upload.length)||0,null===(o=this.fileData)||void 0===o||o.deleted.forEach(t=>{this.data=this.data.filter(o=>o.fileID!==t.id)}),this.length>0?null===(e=this.fileData)||void 0===e||e.upload.forEach(t=>{this.getData(t,t.type.split("/")[1])}):this.data=[]}getData(t,o){this.columns=this.oldColumns;const e=this.fun.base64ToBlob(null==t?void 0:t.base64),i=new FileReader;i.onload=()=>{var e,n,l;const a="json"===o?this.fun.getJson(i.result):"csv"===o?this.fun.getCSV(i.result):this.fun.getExcel(i.result,null===(n=null===(e=null==t?void 0:t.name)||void 0===e?void 0:e.toString())||void 0===n?void 0:n.split(".")[0],null==t?void 0:t.id);if(this.data.push(...a),(null===(l=this.data)||void 0===l?void 0:l.length)>0){const t=this.columns=Object.keys(null==this?void 0:this.data[0]);this.columns=this.columns.map(t=>t.trim().split(" ").length>1&&""!==t.trim().split(" ")[1]?t.trim().split(" ").join("_").toLowerCase():t.trim().toLowerCase());const o=t.filter(t=>!this.columns.includes(t.toLowerCase()));this.columns=this.fun.getColumns(this.columns),o?(console.log(this.data),this.data=this.data.map(t=>{const e=(t,...o)=>o.length?e(((t,o)=>{var e=t;return Object(I.__rest)(o,["symbol"==typeof e?e:e+""])})(o.pop(),t),...o):t;return e(t,...o)})):(this.blockUI.stop(),this.fun.notify("","Please check the columns",4e3),this.length=0)}else this.blockUI.stop(),this.fun.notify("","File does't have a data",4e3),this.length=0},"json"===o||"csv"===o?i.readAsText(e):i.readAsBinaryString(e)}uploadedFile(){var t;const o=[];return null===(t=this.data)||void 0===t||t.forEach(t=>{var e,i,n;0===o.filter(o=>o.route_no===t.route_no).length&&o.push({route_no:t.route_no,left:null===(e=this.data)||void 0===e?void 0:e.filter(o=>{var e;return o.route_no===t.route_no&&"l"===(null===(e=o.position)||void 0===e?void 0:e.toLowerCase())}).length,right:null===(i=this.data)||void 0===i?void 0:i.filter(o=>{var e;return o.route_no===t.route_no&&"r"===(null===(e=o.position)||void 0===e?void 0:e.toLowerCase())}).length,items:null===(n=this.data)||void 0===n?void 0:n.filter(o=>o.route_no===t.route_no)})}),o[o.length-1].route_no}onSave(){this.formImport.emit(this.data)}onCancel(){this.formClose.emit()}showModalTable(){this.blockUI.stop(),this.dialogConfigModal.width=this.width,this.dialogConfigModal.lookupData={caption:"Imported "+this.caption+" data.",columns:this.columns,data:this.data,actions:[{icon:"trash",color:"danger"}],button:"Save"};const t=this.dialogServices.handleDialog(this.dialogConfigModal);this.handleModalChange(t)}handleModalChange(t){t.componentInstance.formSave.subscribe(o=>{this.oldColumns.includes("published")&&(o=o.map(t=>{var o;return Object.assign(Object.assign({},t),{published:"yes"===(null===(o=null==t?void 0:t.published)||void 0===o?void 0:o.toLowerCase())?1:0})})),this.formSubmit.emit({value:o,dialogRef:t})})}}return t.\u0275fac=function(o){return new(o||t)(y.Qb(_.a),y.Qb(A.a),y.Qb(O.b),y.Qb(p.a))},t.\u0275cmp=y.Kb({type:t,selectors:[["app-import-data-template"]],outputs:{formSubmit:"formSubmit",formImport:"formImport",formClose:"formClose"},decls:15,vars:1,consts:[["mat-dialog-content","",1,"p-dialog-content"],[1,"p-col-12"],["fileType","application",3,"fileDropped"],["fileImage",""],["mat-dialog-actions","",1,"p-dialog-footer","button-row"],["pbutton","","pripple","","label","Cancel","type","button","icon","pi pi-times",1,"p-button-text","p-ripple","p-button","p-component","shadow-none","p-mr-2",3,"click"],["aria-hidden","true",1,"p-button-icon","p-button-icon-left","pi","pi-times"],[1,"p-button-label"],[1,"p-ink"],["pbutton","","pripple","","label","Save","icon","pi pi-check","type","submit",1,"p-button-text","p-ripple","p-button","p-component","shadow-none",3,"disabled","click"],["aria-hidden","true",1,"p-button-icon","p-button-icon-left","pi","pi-check"]],template:function(t,o){1&t&&(y.Wb(0,"div",0),y.Wb(1,"div",1),y.Wb(2,"app-file-upload-template",2,3),y.ec("fileDropped",function(t){return o.getFile(t)}),y.Vb(),y.Vb(),y.Vb(),y.Wb(4,"div",4),y.Wb(5,"button",5),y.ec("click",function(){return o.onCancel()}),y.Rb(6,"span",6),y.Wb(7,"span",7),y.Qc(8,"Cancel"),y.Vb(),y.Rb(9,"span",8),y.Vb(),y.Wb(10,"button",9),y.ec("click",function(){return o.onSave()}),y.Rb(11,"span",10),y.Wb(12,"span",7),y.Qc(13,"Import"),y.Vb(),y.Rb(14,"span",8),y.Vb(),y.Vb()),2&t&&(y.Cb(10),y.oc("disabled",0==o.length))},directives:[p.e,x.a,p.c],styles:[".p-datatable[_ngcontent-%COMP%]   .p-datatable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:.05rem 1px;white-space:normal;word-wrap:break-all}"]}),Object(I.__decorate)([Object(W.a)()],t.prototype,"blockUI",void 0),t})();var R=e("nnAt"),D=e("FKr1");function F(t,o){if(1&t&&(y.Wb(0,"mat-option",28),y.Wb(1,"span",10),y.Wb(2,"b"),y.Qc(3),y.Vb(),y.Vb(),y.Rb(4,"br"),y.Wb(5,"span"),y.Wb(6,"small"),y.Qc(7),y.Vb(),y.Vb(),y.Vb()),2&t){const t=o.$implicit;y.oc("value",t),y.Cb(3),y.Rc(t.label),y.Cb(4),y.Rc(t.name)}}function Q(t,o){if(1&t&&(y.Wb(0,"mat-error",29),y.Qc(1),y.Vb()),2&t){const t=y.hc();y.Cb(1),y.Rc(t.displayMessage.title)}}function M(t,o){if(1&t&&(y.Wb(0,"mat-error",29),y.Qc(1),y.Vb()),2&t){const t=y.hc();y.Cb(1),y.Rc(t.displayMessage.title)}}function B(t,o){if(1&t&&(y.Wb(0,"mat-error",29),y.Qc(1),y.Vb()),2&t){const t=y.hc();y.Cb(1),y.Rc(t.displayMessage.title)}}function J(t,o){if(1&t&&(y.Wb(0,"mat-error",29),y.Qc(1),y.Vb()),2&t){const t=y.hc();y.Cb(1),y.Rc(t.displayMessage.title)}}let j=(()=>{class t{constructor(t,o,e){var i;this.fb=t,this.fun=o,this.config=e,this.formSubmit=new y.o,this.formEditSave=new y.o,this.formClose=new y.o,this.columns=[],this.selectedColumns=[],this.displayMessage={},this.columns=this.config.formData.data.map(t=>({position:t.position,name:t.amharic_names+" - "+t.station_names+" ("+t.latitude+","+t.longitude+")",label:t.route_no+" "+t.position,value:t.id})),this.form=this.fb.group({id:(null===(i=this.config.formData)||void 0===i?void 0:i.id)||0,options:"a",columns:[this.columns,g.x.required],amharic_names:"",station_names:"",latitude:"",longitude:""}),this.genericValidator=new R.a(this.validationMessages)}ngOnInit(){this.form.valueChanges.subscribe()}onColumnsChange(t){this.selectedColumns="a"===t.value?this.columns:this.columns.filter(o=>o.position.toLowerCase()===t.value),this.form.controls.columns.patchValue(this.selectedColumns)}blur(){}keyDown(t,o){return t.key?this.fun.allowedKey(t.key,o):(t.target.value=this.fun.removeNotAllowedKey(t.target.value,o),!0)}getFile(t){this.form.controls.image.setValue((null==t?void 0:t.upload.length)>0?null==t?void 0:t.upload:[])}onSubmit(){this.formEditSave.emit(this.form.value)}onCancel(){this.formClose.emit()}}return t.\u0275fac=function(o){return new(o||t)(y.Qb(g.e),y.Qb(A.a),y.Qb(p.a))},t.\u0275cmp=y.Kb({type:t,selectors:[["app-notification-form"]],outputs:{formSubmit:"formSubmit",formEditSave:"formEditSave",formClose:"formClose"},decls:63,vars:9,consts:[["autocomplete","off",3,"formGroup","submit"],["mat-dialog-title","",1,"p-dialog-header","p-d-flex","p-jc-lg-between",2,"padding","0.2re 0.3rem"],[1,"p-dialog-title","capitalize"],["pButton","","pRipple","","icon","pi pi-times",1,"shadow-none","p-button-rounded","p-button-plain","p-button-text","p-mr-1",3,"click"],["mat-dialog-content","",1,"p-dialog-content"],[1,"p-grid"],[1,"p-col-12"],[1,"full-width","p-mt-2"],["tabindex","1","formControlName","options",3,"selectionChange"],["value","a"],[1,"capitalize"],["value","r"],["value","l"],["tabindex","1","formControlName","columns","placeholder","choose rows want to edit","multiple","","required","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"full-width"],["matInput","","tabindex","0","type","text","value","","formControlName","amharic_names",3,"blur"],["class","error",4,"ngIf"],["matInput","","tabindex","0","type","text","value","","formControlName","station_names",3,"blur","input","keydown"],["matInput","","tabindex","0","type","text","value","","formControlName","longitude",3,"blur","input","keydown"],["matInput","","tabindex","0","type","text","value","","formControlName","latitude",3,"blur","input","keydown"],["mat-dialog-actions","",1,"p-dialog-footer","button-row"],["pbutton","","pripple","","label","Cancel","type","button","icon","pi pi-times",1,"p-button-text","p-ripple","p-button","p-component","shadow-none","p-mr-2",3,"click"],["aria-hidden","true",1,"p-button-icon","p-button-icon-left","pi","pi-times"],[1,"p-button-label"],[1,"p-ink"],["pbutton","","pripple","","label","Save","icon","pi pi-check","type","submit",1,"p-button-text","p-ripple","p-button","p-component","shadow-none",3,"disabled"],["aria-hidden","true",1,"p-button-icon","p-button-icon-left","pi","pi-check"],[3,"value"],[1,"error"]],template:function(t,o){1&t&&(y.Wb(0,"form",0),y.ec("submit",function(){return o.onSubmit()}),y.Wb(1,"div",1),y.Wb(2,"div",2),y.Wb(3,"b"),y.Qc(4),y.Vb(),y.Vb(),y.Wb(5,"button",3),y.ec("click",function(){return o.onCancel()}),y.Vb(),y.Vb(),y.Wb(6,"div",4),y.Wb(7,"div",5),y.Wb(8,"div",6),y.Wb(9,"mat-form-field",7),y.Wb(10,"mat-label"),y.Qc(11,"Direction"),y.Vb(),y.Wb(12,"mat-select",8),y.ec("selectionChange",function(t){return o.onColumnsChange(t)}),y.Wb(13,"mat-option",9),y.Wb(14,"span",10),y.Qc(15,"All"),y.Vb(),y.Vb(),y.Wb(16,"mat-option",11),y.Wb(17,"span",10),y.Qc(18,"Right"),y.Vb(),y.Vb(),y.Wb(19,"mat-option",12),y.Wb(20,"span",10),y.Qc(21,"Left"),y.Vb(),y.Vb(),y.Vb(),y.Vb(),y.Vb(),y.Wb(22,"div",6),y.Wb(23,"mat-form-field",7),y.Wb(24,"mat-label"),y.Qc(25,"Rows"),y.Vb(),y.Wb(26,"mat-select",13),y.Oc(27,F,8,3,"mat-option",14),y.Vb(),y.Vb(),y.Vb(),y.Wb(28,"div",6),y.Wb(29,"mat-form-field",15),y.Wb(30,"mat-label"),y.Qc(31,"Amharic Names"),y.Vb(),y.Wb(32,"input",16),y.ec("blur",function(){return o.blur()}),y.Vb(),y.Oc(33,Q,2,1,"mat-error",17),y.Vb(),y.Vb(),y.Wb(34,"div",6),y.Wb(35,"mat-form-field",15),y.Wb(36,"mat-label"),y.Qc(37,"Station Names"),y.Vb(),y.Wb(38,"input",18),y.ec("blur",function(){return o.blur()})("input",function(t){return o.keyDown(t,"text")})("keydown",function(t){return o.keyDown(t,"text")}),y.Vb(),y.Oc(39,M,2,1,"mat-error",17),y.Vb(),y.Vb(),y.Wb(40,"div",6),y.Wb(41,"mat-form-field",15),y.Wb(42,"mat-label"),y.Qc(43,"Longitude"),y.Vb(),y.Wb(44,"input",19),y.ec("blur",function(){return o.blur()})("input",function(t){return o.keyDown(t,"price")})("keydown",function(t){return o.keyDown(t,"price")}),y.Vb(),y.Oc(45,B,2,1,"mat-error",17),y.Vb(),y.Vb(),y.Wb(46,"div",6),y.Wb(47,"mat-form-field",15),y.Wb(48,"mat-label"),y.Qc(49,"Latitude"),y.Vb(),y.Wb(50,"input",20),y.ec("blur",function(){return o.blur()})("input",function(t){return o.keyDown(t,"price")})("keydown",function(t){return o.keyDown(t,"price")}),y.Vb(),y.Oc(51,J,2,1,"mat-error",17),y.Vb(),y.Vb(),y.Vb(),y.Vb(),y.Wb(52,"div",21),y.Wb(53,"button",22),y.ec("click",function(){return o.onCancel()}),y.Rb(54,"span",23),y.Wb(55,"span",24),y.Qc(56,"Cancel"),y.Vb(),y.Rb(57,"span",25),y.Vb(),y.Wb(58,"button",26),y.Rb(59,"span",27),y.Wb(60,"span",24),y.Qc(61,"Save"),y.Vb(),y.Rb(62,"span",25),y.Vb(),y.Vb(),y.Vb()),2&t&&(y.oc("formGroup",o.form),y.Cb(4),y.Rc(o.config.title),y.Cb(22),y.oc("value",o.selectedColumns),y.Cb(1),y.oc("ngForOf",o.columns),y.Cb(6),y.oc("ngIf",o.displayMessage.title),y.Cb(6),y.oc("ngIf",o.displayMessage.title),y.Cb(6),y.oc("ngIf",o.displayMessage.title),y.Cb(6),y.oc("ngIf",o.displayMessage.title),y.Cb(7),y.oc("disabled",!o.form.valid))},directives:[g.y,g.r,g.i,p.g,m.b,h.a,p.e,d.c,d.g,r.a,g.q,g.g,D.i,g.w,k.l,u.b,g.c,k.m,p.c,d.b],styles:[""]}),t})();var T=e("sSZD"),P=e("I/3d");let N=(()=>{class t{constructor(t,o,e){this.db=t,this.firestore=o,this.fun=e,this.url="/Notification"}get(t=null){const o=""+this.url;return t?this.firestore.collection(o).doc(t):this.firestore.collection(o)}add(t,o=null){return delete t.id,this.firestore.collection(this.url).add(t).then(t=>{var e;null==o||o.ref.close(),null===(e=null==o?void 0:o.block)||void 0===e||e.stop()}).catch(t=>{var e;null===(e=null==o?void 0:o.block)||void 0===e||e.stop()})}update(t,o,e=null){return delete o.id,this.firestore.collection(this.url).doc(t).update(o).then(t=>{null==e||e.ref.close(),null==e||e.block.stop()}).catch(t=>{var o;null===(o=null==e?void 0:e.block)||void 0===o||o.stop()})}delete(t){return this.firestore.collection(this.url).doc(t).delete()}}return t.\u0275fac=function(o){return new(o||t)(y.ac(T.a),y.ac(P.a),y.ac(A.a))},t.\u0275prov=y.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var L=e("WLRH");function G(t,o){if(1&t){const t=y.Xb();y.Wb(0,"mat-form-field",10),y.Wb(1,"mat-label"),y.Qc(2,"Export Content"),y.Vb(),y.Wb(3,"mat-select",3),y.ec("valueChange",function(o){return y.Ec(t),y.hc().exportContent=o})("selectionChange",function(o){return y.Ec(t),y.hc().onExportContentChange(o)}),y.Wb(4,"mat-option",11),y.Wb(5,"span",5),y.Qc(6,"All"),y.Vb(),y.Vb(),y.Wb(7,"mat-option",12),y.Wb(8,"span",5),y.Qc(9,"Table Content"),y.Vb(),y.Vb(),y.Vb(),y.Vb()}if(2&t){const t=y.hc();y.Cb(3),y.oc("value",t.exportContent)}}function z(t,o){if(1&t&&(y.Wb(0,"mat-option",4),y.Wb(1,"span",5),y.Qc(2),y.Vb(),y.Vb()),2&t){const t=o.$implicit;y.oc("value",t),y.Cb(2),y.Rc(t.split("_").join(" "))}}function U(t,o){if(1&t){const t=y.Xb();y.Wb(0,"mat-form-field",13),y.Wb(1,"mat-label"),y.Qc(2,"Export Columns"),y.Vb(),y.Wb(3,"mat-select",14),y.ec("valueChange",function(o){return y.Ec(t),y.hc().selectedExportColumns=o}),y.Oc(4,z,3,2,"mat-option",15),y.Vb(),y.Vb()}if(2&t){const t=y.hc();y.Cb(3),y.oc("value",t.selectedExportColumns),y.Cb(1),y.oc("ngForOf",t.exportColumns)}}const X=[{path:"",component:(()=>{class t{constructor(t,o){this.notificationService=t,this.dialogServices=o,this.caption="GPS",this.isGrouped=!1,this.isGroupedCoords=!1,this.columns=[],this.exportContent="all",this.exportColumns=[],this.selectedExportColumns=[],this.rounding=3,this.selectedColumns=[],this.actions=[{icon:"pencil",color:"warning",disable:!1},{icon:"download",color:""}],this.toolBarActions=[{position:"right",action:[{label:"Group",icon:"th-large",color:"",tooltip:null}]},{position:"left",action:[{label:"Export",icon:"download",color:"",tooltip:null},{label:"Import",icon:"cloud-upload",color:"",tooltip:null}]}],this.notification$=[],this.ungroupedData=[],this.dialogConfigGps={width:"550px",formComponent:j},this.dialogConfig={width:"650px",formComponent:E},this.dialogConfigModal={closable:!0,formComponent:V.a},this.timer=t=>new Promise(o=>setTimeout(o,t))}ngOnInit(){this.columns=[{label:"Route No.",name:"route_no",sortable:!0},{label:"Position",name:"position",sortable:!0},{label:"Station Names",name:"station_names",sortable:!0},{label:"Amharic Names",name:"amharic_names",sortable:!0},{label:"Longitude",name:"longitude",sortable:!0},{label:"Latitude",name:"latitude",sortable:!0}]}add(){this.dialogConfig.title="GPS Data",this.dialogConfig.formData="",this.dialogConfig.lookupData={columns:["Route No.","Position","Station Names","Amharic Names","Longitude","Latitude"]};const t=this.dialogServices.handleDialog(this.dialogConfig);this.handleModalChange(t)}update(t){this.dialogConfigGps.title=this.isGrouped?"Route No. - "+t.route_no:t.amharic_names+" - "+t.station_names,this.dialogConfigGps.formData={amharic_names:t.amharic_names,latitude:t.latitude,longitude:t.longitude,station_names:t.station_names,data:t.items};const o=this.dialogServices.handleDialog(this.dialogConfigGps);this.handleModalChange(o)}onActionClick(t){var o;if("pencil"===t.type&&this.isGroupedCoords)this.update(t.data);else if("download"===t.type)this.download([t.data]);else if("link"===t.type){let e,i="";this.isGroupedCoords&&!this.isGrouped?(i=t.data.amharic_names+" - "+t.data.station_names+" ("+t.data.latitude+","+t.data.longitude+")",e=t.data.items):(i=(null===(o=t.data)||void 0===o?void 0:o.route_no)+""+(null==t?void 0:t.position),e=t.data.data["left"===t.position.toLowerCase()?"l":"r"]),this.showModalTable(i,e)}}showModalTable(t,o){this.dialogConfigModal.width="800px",this.dialogConfigModal.lookupData={caption:t,columns:[{label:"Route No.",name:"route_no",sortable:!0},{label:"Position",name:"position",sortable:!0},{label:"Station Names",name:"station_names",sortable:!0},{label:"Amharic Names",name:"amharic_names",sortable:!0},{label:"Longitude",name:"longitude",sortable:!0},{label:"Latitude",name:"latitude",sortable:!0}],data:o,button:"Export",isSaveMultiple:!0};const e=this.dialogServices.handleDialog(this.dialogConfigModal);this.handleModalChange(e)}onToolBarActionClick(t){if("cloud-upload"===t)this.add();else if("download"===t){if(this.notification$.length>0)if(this.isGrouped)this.download(this.notification$);else{let t;t="all"===this.exportContent?this.ungroupedData:this.notification$,this.jsonToCSV(t)}}else"th-large"===t&&(this.isGrouped=!this.isGrouped,this.isGrouped?(this.exportColumns=[],this.notification$=this.groupBy(this.ungroupedData)):(this.notification$=this.groupCoords(this.ungroupedData,this.rounding),this.onExportContentChange("")),this.columns=this.selectedColumns=this.isGrouped?[{label:"Route No.",name:"route_no",sortable:!0},{label:"Left",name:"left",type:"link",sortable:!0},{label:"Right",name:"right",type:"link",sortable:!0}]:this.isGroupedCoords?[{label:"amharic names",name:"amharic_names",sortable:!0},{label:"station names",name:"station_names",sortable:!0},{label:"longitude",name:"longitude",sortable:!0},{label:"latitude",name:"latitude",sortable:!0},{label:"count",name:"count",type:"link",sortable:!0}]:[{label:"Route No.",name:"route_no",sortable:!0},{label:"Position",name:"position",sortable:!0},{label:"Station Names",name:"station_names",sortable:!0},{label:"Amharic Names",name:"amharic_names",sortable:!0},{label:"Longitude",name:"longitude",sortable:!0},{label:"Latitude",name:"latitude",sortable:!0}],this.actions=this.isGrouped?[{icon:"pencil",color:"warning",disable:!1},{icon:"download",color:""}]:[{icon:"pencil",color:"warning",disable:!1}])}download(t){return Object(I.__awaiter)(this,void 0,void 0,function*(){console.log(t);let o=0;for(const e of t)for(const t in e.data)if(Object.prototype.hasOwnProperty.call(e.data,t)){const i=e.route_no+t.toUpperCase();20===o?(yield this.timer(4e3),o=0):o++,""!==e.route_no&&this.jsonToCSV(e.data[t],i)}})}jsonToCSV(t,o="gps"){"gps"!==o&&(t=t.map(t=>{var o=Object(I.__rest)(t,["route_no","position","no"]);return Object.assign({},o)})),t=t.map(this.selectedExportColumns&&!this.isGrouped?t=>{const o=[];for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&this.selectedExportColumns.includes(e)&&(o[e]=t[e]);return Object.assign({},o)}:t=>{var o=Object(I.__rest)(t,["fileID","id","no"]);return Object.assign({},o)});const e=(t,o)=>null===o?"":o,i=Object.keys(t[0]),n=[i.join(","),...t.map(t=>i.map(o=>JSON.stringify(t[o],e)).join(","))].join("\r\n"),l=new Blob(["\ufeff"+n],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(l),s=document.createElement("a");s.href=a,s.download=(o||"gps")+".csv",s.click(),s.remove(),window.webkitURL.revokeObjectURL(a)}jsonToExcel(t,o=""){t=t.map(t=>{var o=Object(I.__rest)(t,["fileID"]);return Object.assign({},o)})}downloadJson(t,o=""){t=t.map(t=>{var o=Object(I.__rest)(t,["fileID"]);return Object.assign({},o)});const e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t)),i=document.createElement("a");i.href=e,i.id="download_id",i.download=(o||"gps")+".json",i.click(),i.remove()}groupBy(t){const o=[];return null==t||t.forEach(e=>{0===o.filter(t=>t.route_no===e.route_no).length&&o.push({route_no:e.route_no,left:null==t?void 0:t.filter(t=>{var o;return t.route_no===e.route_no&&"l"===(null===(o=t.position)||void 0===o?void 0:o.toLowerCase())}).length,right:null==t?void 0:t.filter(t=>{var o;return t.route_no===e.route_no&&"r"===(null===(o=t.position)||void 0===o?void 0:o.toLowerCase())}).length,items:null==t?void 0:t.filter(t=>t.route_no===e.route_no),data:{l:null==t?void 0:t.filter(t=>{var o;return t.route_no===e.route_no&&"l"===(null===(o=t.position)||void 0===o?void 0:o.toLowerCase())}),r:null==t?void 0:t.filter(t=>{var o;return t.route_no===e.route_no&&"r"===(null===(o=t.position)||void 0===o?void 0:o.toLowerCase())})}})}),this.selectedColumns=this.columns=[{label:"Route No.",name:"route_no",sortable:!0},{label:"Left",name:"left",type:"link",sortable:!0},{label:"Right",name:"right",type:"link",sortable:!0}],this.actions=[{icon:"pencil",color:"warning",disable:!1},{icon:"download",color:""}],this.ungroupedData=t,o}groupCoords(t,o=3){this.isGroupedCoords=!0;const e=[...t.map(t=>Object.assign(Object.assign({},t),{latitude:parseFloat(t.latitude).toFixed(o),longitude:parseFloat(t.longitude).toFixed(o)})).reduce((t,o)=>{const e=o.latitude+"-"+o.longitude,i=t.get(e)||Object.assign({},o,{items:[]});return i.items.push(o),t.set(e,i)},new Map).values()].map(o=>{var e;return{amharic_names:o.amharic_names,station_names:o.station_names,latitude:o.latitude,longitude:o.longitude,count:o.items.length,items:null===(e=o.items)||void 0===e?void 0:e.map(o=>Object.assign(Object.assign({},o),{latitude:t.filter(t=>t.route_no===o.route_no&&t.position===o.position&&t.no===o.no)[0].latitude,longitude:t.filter(t=>t.route_no===o.route_no&&t.position===o.position&&t.no===o.no)[0].longitude}))}});return this.selectedColumns=this.columns=[{label:"amharic names",name:"amharic_names",sortable:!0},{label:"station names",name:"station_names",sortable:!0},{label:"longitude",name:"longitude",sortable:!0},{label:"latitude",name:"latitude",sortable:!0},{label:"count",name:"count",type:"link",sortable:!0}],this.actions=[{icon:"pencil",color:"warning",disable:!1}],this.ungroupedData=t,e}onExportContentChange(t){this.ungroupedData.length>0&&this.notification$.length>0&&(this.exportColumns=this.selectedExportColumns=Object.keys("all"===this.exportContent?this.ungroupedData[0]:this.notification$[0]))}onColumnsChange(t){this.notification$!==[]&&(this.notification$=this.groupCoords(this.ungroupedData,t.value))}handleModalChange(t){var o,e,i,n,l,a;null===(e=null===(o=t.componentInstance)||void 0===o?void 0:o.formImport)||void 0===e||e.subscribe(o=>{let e=0;const i=this.ungroupedData;i.push(...o);const n=i.map(t=>(e++,Object.assign(Object.assign({},t),{id:e})));console.log(n),this.isGrouped?this.notification$=this.groupBy(n):(this.notification$=this.groupCoords(n,this.rounding),this.onExportContentChange("")),t.close()}),null===(n=null===(i=t.componentInstance)||void 0===i?void 0:i.formSave)||void 0===n||n.subscribe(t=>{}),null===(a=null===(l=t.componentInstance)||void 0===l?void 0:l.formEditSave)||void 0===a||a.subscribe(o=>{const e={amharic_names:o.amharic_names||null,station_names:o.station_names||null,latitude:o.latitude||null,longitude:o.longitude||null},i=Object.keys(e).filter(t=>null!=e[t]).reduce((t,o)=>Object.assign(Object.assign({},t),{[o]:e[o]}),{});null==o||o.columns.forEach(t=>{this.ungroupedData=this.ungroupedData.map(o=>o.id===t.value?Object.assign(Object.assign({},o),i):o)}),this.notification$=this.groupCoords(this.ungroupedData,this.rounding),t.close()})}}return t.\u0275fac=function(o){return new(o||t)(y.Qb(N),y.Qb(_.a))},t.\u0275cmp=y.Kb({type:t,selectors:[["app-notification"]],decls:26,vars:17,consts:[[1,"card"],[1,"p-toolbar-group-left"],[1,"p-mr-3"],["tabindex","1",3,"value","valueChange","selectionChange"],[3,"value"],[1,"capitalize"],["class","p-ml-3",4,"ngIf"],[1,"p-toolbar-group-left","p-col-12","p-md-6"],["class","full-width",4,"ngIf"],[3,"caption","columns","selectedColumns","data","actions","first","rows","sortBy","toolBarActions","buttonClick","toolBarButtonClick"],[1,"p-ml-3"],["value","all"],["value","table"],[1,"full-width"],["tabindex","1","placeholder","choose columns want to export","multiple","",3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"]],template:function(t,o){1&t&&(y.Wb(0,"div",0),y.Wb(1,"p-toolbar"),y.Wb(2,"div",1),y.Wb(3,"mat-form-field",2),y.Wb(4,"mat-label"),y.Qc(5,"Rounding"),y.Vb(),y.Wb(6,"mat-select",3),y.ec("valueChange",function(t){return o.rounding=t})("selectionChange",function(t){return o.onColumnsChange(t)}),y.Wb(7,"mat-option",4),y.Wb(8,"span",5),y.Qc(9,"2"),y.Vb(),y.Vb(),y.Wb(10,"mat-option",4),y.Wb(11,"span",5),y.Qc(12,"3"),y.Vb(),y.Vb(),y.Wb(13,"mat-option",4),y.Wb(14,"span",5),y.Qc(15,"4"),y.Vb(),y.Vb(),y.Wb(16,"mat-option",4),y.Wb(17,"span",5),y.Qc(18,"5"),y.Vb(),y.Vb(),y.Wb(19,"mat-option",4),y.Wb(20,"span",5),y.Qc(21,"6"),y.Vb(),y.Vb(),y.Vb(),y.Vb(),y.Oc(22,G,10,1,"mat-form-field",6),y.Vb(),y.Wb(23,"div",7),y.Oc(24,U,5,2,"mat-form-field",8),y.Vb(),y.Vb(),y.Vb(),y.Wb(25,"app-table-template",9),y.ec("buttonClick",function(t){return o.onActionClick(t)})("toolBarButtonClick",function(t){return o.onToolBarActionClick(t)}),y.Vb()),2&t&&(y.Cb(6),y.oc("value",o.rounding),y.Cb(1),y.oc("value",2),y.Cb(3),y.oc("value",3),y.Cb(3),y.oc("value",4),y.Cb(3),y.oc("value",5),y.Cb(3),y.oc("value",6),y.Cb(3),y.oc("ngIf",!o.isGrouped),y.Cb(2),y.oc("ngIf",!o.isGrouped&&o.exportColumns.length>0),y.Cb(1),y.oc("caption",o.caption)("columns",o.columns)("selectedColumns",o.selectedColumns)("data",o.notification$)("actions",o.actions)("first",(null==o.currentPage?null:o.currentPage.first)||0)("rows",(null==o.currentPage?null:o.currentPage.rows)||10)("sortBy",o.sortBy)("toolBarActions",o.toolBarActions))},directives:[i.a,d.c,d.g,r.a,D.i,k.m,L.a,k.l],styles:[""]}),Object(I.__decorate)([Object(W.a)()],t.prototype,"blockUI",void 0),t})()},{path:"**",redirectTo:""}];let K=(()=>{class t{}return t.\u0275mod=y.Ob({type:t}),t.\u0275inj=y.Nb({factory:function(o){return new(o||t)},imports:[[w.e.forChild(X)],w.e]}),t})(),H=(()=>{class t{}return t.\u0275mod=y.Ob({type:t}),t.\u0275inj=y.Nb({factory:function(o){return new(o||t)},imports:[[k.c,K,C.a,v.f,g.k,g.v,f.b,m.c,S.a,h.b,i.b,b.a,p.f,d.e,u.c,c.b,r.b,s.b,a.i,l.a,n.a]]}),t})()},"7+5H":function(t,o,e){"use strict";e.d(o,"a",function(){return r});var i=e("0IaG"),n=e("fXoL"),l=e("WLRH"),a=e("ofXK");function s(t,o){if(1&t){const t=n.Xb();n.Wb(0,"button",9),n.ec("click",function(){return n.Ec(t),n.hc().onSave()}),n.Rb(1,"span",10),n.Wb(2,"span",6),n.Qc(3),n.Vb(),n.Rb(4,"span",7),n.Vb()}if(2&t){const t=n.hc();n.oc("disabled",0===t.data.length),n.Cb(3),n.Rc(t.button)}}let r=(()=>{class t{constructor(t){this.config=t,this.formSubmit=new n.o,this.modalAction=new n.o,this.formSave=new n.o,this.formClose=new n.o,this.columns=[],this.data=[],this.actions=[],this.toolBarActions=[],this.save=!0,this.isSaveMultiple=!1}ngOnInit(){var t,o,e,i,n,l,a,s,r,c,u,d,p,b;this.caption=null===(o=null===(t=this.config)||void 0===t?void 0:t.lookupData)||void 0===o?void 0:o.caption,this.button=null===(i=null===(e=this.config)||void 0===e?void 0:e.lookupData)||void 0===i?void 0:i.button,this.id=null===(l=null===(n=this.config)||void 0===n?void 0:n.lookupData)||void 0===l?void 0:l.id,this.columns=(null===(s=null===(a=this.config)||void 0===a?void 0:a.lookupData)||void 0===s?void 0:s.columns)||[],this.data=(null===(c=null===(r=this.config)||void 0===r?void 0:r.lookupData)||void 0===c?void 0:c.data)||[],this.actions=(null===(d=null===(u=this.config)||void 0===u?void 0:u.lookupData)||void 0===d?void 0:d.actions)||[],this.toolBarActions=(null===(b=null===(p=this.config)||void 0===p?void 0:p.lookupData)||void 0===b?void 0:b.toolBarActions)||[]}onActionClick(t){this.modalAction.emit(t),"trash"===t.type&&(this.data=this.data.filter(o=>o.id!==t.data.id))}onToolBarActionClick(t){}onCancel(){this.formClose.emit()}onSave(){"save"===this.button.toLowerCase()?this.formSave.emit(this.data):this.id&&"detail"===this.button.toLowerCase()&&this.formSave.emit(this.id)}}return t.\u0275fac=function(o){return new(o||t)(n.Qb(i.a))},t.\u0275cmp=n.Kb({type:t,selectors:[["app-model-table"]],inputs:{data:"data"},outputs:{formSubmit:"formSubmit",modalAction:"modalAction",formSave:"formSave",formClose:"formClose"},decls:11,vars:8,consts:[[1,"p-dialog-content",2,"overflow","hidden","overflow-x","auto"],[1,"capitalize",2,"font-size","large"],[3,"columns","data","isInModal","hasOrder","actions","toolBarActions","buttonClick","toolBarButtonClick"],["mat-dialog-actions","",1,"p-dialog-footer","button-row"],["pbutton","","pripple","","icon","pi pi-times",1,"p-button-text","p-ripple","p-button","p-component","shadow-none","p-mr-2",2,"margin-bottom","0!important",3,"click"],["aria-hidden","true",1,"p-button-icon","p-button-icon-left","pi","pi-times"],[1,"p-button-label"],[1,"p-ink"],["pbutton","","pripple","","icon","pi pi-check","class","p-button-text p-ripple p-button p-component shadow-none",3,"disabled","click",4,"ngIf"],["pbutton","","pripple","","icon","pi pi-check",1,"p-button-text","p-ripple","p-button","p-component","shadow-none",3,"disabled","click"],["aria-hidden","true",1,"p-button-icon","p-button-icon-left","pi","pi-check"]],template:function(t,o){1&t&&(n.Wb(0,"div",0),n.Wb(1,"div",1),n.Qc(2),n.Vb(),n.Wb(3,"app-table-template",2),n.ec("buttonClick",function(t){return o.onActionClick(t)})("toolBarButtonClick",function(t){return o.onToolBarActionClick(t)}),n.Vb(),n.Vb(),n.Wb(4,"div",3),n.Wb(5,"button",4),n.ec("click",function(){return o.onCancel()}),n.Rb(6,"span",5),n.Wb(7,"span",6),n.Qc(8,"Cancel"),n.Vb(),n.Rb(9,"span",7),n.Vb(),n.Oc(10,s,5,2,"button",8),n.Vb()),2&t&&(n.Cb(2),n.Sc("=> ",o.caption,""),n.Cb(1),n.oc("columns",o.columns)("data",o.data)("isInModal",!0)("hasOrder",!1)("actions",o.actions)("toolBarActions",o.toolBarActions),n.Cb(7),n.oc("ngIf",void 0!==o.button))},directives:[l.a,i.c,a.m],styles:[""]}),t})()},xivw:function(t,o,e){"use strict";e.d(o,"a",function(){return I});var i=e("mrSG"),n=e("fXoL"),l=e("12jx"),a=e("otk6"),s=e("aPmp"),r=e("ofXK"),c=e("R5Na"),u=e("1jcm"),d=e("jIHw"),p=e("Q4Mo"),b=e("xlun");function h(t,o){if(1&t){const t=n.Xb();n.Wb(0,"div",4),n.Wb(1,"input",5,6),n.ec("change",function(o){return n.Ec(t),n.hc().fileBrowserHandler(o)}),n.Vb(),n.Rb(3,"i",7),n.Wb(4,"h3"),n.Qc(5," Drag and Drop file here"),n.Vb(),n.Wb(6,"h3"),n.Qc(7,"or"),n.Vb(),n.Wb(8,"label",8),n.Qc(9,"Browse for file"),n.Vb(),n.Vb()}if(2&t){const t=n.hc();n.Cb(1),n.oc("accept",t.allowedFile)("multiple",t.multi)}}function m(t,o){if(1&t&&(n.Wb(0,"span",16),n.Qc(1),n.Vb()),2&t){const t=n.hc().$implicit;n.Cb(1),n.Rc(t.name)}}function f(t,o){if(1&t){const t=n.Xb();n.Wb(0,"div",12),n.ec("click",function(){n.Ec(t);const e=o.$implicit;return n.hc(2).clickImage(e)}),n.Wb(1,"span",13),n.Wb(2,"span",14),n.ec("click",function(){n.Ec(t);const e=o.$implicit;return n.hc(2).removeFile(e)}),n.Qc(3,"\xd7"),n.Vb(),n.Vb(),n.Oc(4,m,2,1,"span",15),n.Vb()}if(2&t){const t=o.$implicit,e=n.hc(2);n.Kc("background-image: url('",e.showImage(t),"');"),n.Cb(4),n.oc("ngIf","image"!=e.fileType)}}const g=function(t){return{inMulti:t}};function v(t,o){if(1&t&&(n.Wb(0,"div",9),n.Wb(1,"div",10),n.Oc(2,f,5,4,"div",11),n.Vb(),n.Vb()),2&t){const t=n.hc();n.Cb(1),n.oc("ngClass",n.sc(2,g,!t.multi)),n.Cb(1),n.oc("ngForOf",t.uploadedFile)}}function C(t,o){if(1&t){const t=n.Xb();n.Wb(0,"span",22),n.Wb(1,"button",23),n.Wb(2,"span",24),n.Wb(3,"input",25,26),n.ec("change",function(o){return n.Ec(t),n.hc(2).fileBrowserHandler(o)}),n.Vb(),n.Vb(),n.Vb(),n.Vb()}if(2&t){const t=n.hc(2);n.Cb(3),n.oc("accept",t.allowedFile)("multiple",t.multi)}}function k(t,o){if(1&t){const t=n.Xb();n.Wb(0,"span",27),n.Wb(1,"button",28),n.ec("click",function(){n.Ec(t);const o=n.hc(2);return o.files=[],o.uploadedFile=[]}),n.Vb(),n.Vb()}}function S(t,o){if(1&t){const t=n.Xb();n.Wb(0,"div",17),n.Wb(1,"span",18),n.Qc(2),n.Vb(),n.Wb(3,"mat-slide-toggle",19),n.ec("change",function(o){return n.Ec(t),n.hc().toggle(o)}),n.Qc(4,"Append"),n.Vb(),n.Oc(5,C,5,2,"span",20),n.Oc(6,k,2,0,"span",21),n.Vb()}if(2&t){const t=n.hc();n.Cb(2),n.Sc("",t.uploadedFile?t.uploadedFile.length:0," files upload"),n.Cb(1),n.oc("checked",t.append),n.Cb(2),n.oc("ngIf",t.uploadedFile.length>0),n.Cb(1),n.oc("ngIf",t.uploadedFile.length>0)}}const w=function(t){return{border:t}};let I=(()=>{class t{constructor(t,o){this.fun=t,this.viewImageService=o,this.deletedFile=[],this.files=[],this.path=[],this.countFile=0,this.counter=0,this.allowedFile="",this.touched=!1,this.color="dashed 2px #979797",this.pdf="../../../../assets/image/pdf.png",this.word="../../../../assets/image/word.png",this.coordination=null,this.append=!0,this.ID=0,this.uploadedFile=[],this.limit=0,this.multi=!0,this.fileType="image",this.profile=!1,this.subtitle=!1,this.fileDropped=new n.o}ngOnInit(){this.uploadedFile=this.uploadedFile.map(t=>null==t.base64&&t.split("://").length>1?{url:t,base64:"",fileType:""}:Object.assign({},t)),this.pathTree(),this.multi||(this.append=!1),this.allowedFile="image"===this.fileType?"image/*":"application/*,.csv,.json",this.limit=this.multi||0!==this.limit?this.limit:1,this.emit("OnDefault")}onDragOver(t){t.preventDefault(),t.stopPropagation(),this.color="dashed 2px green"}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.color=this.touched&&0===this.uploadedFile.length?"dashed 2px red":"dashed 2px #979797"}onDrop(t){t.preventDefault(),t.stopPropagation(),t.dataTransfer.files.length>0&&this.checkIfExist(t)}fileBrowserHandler(t){this.checkIfExist(t,"manual")}toggle(t){this.append=t.checked}removeStoredData(){this.multi&&!this.append&&this.uploadedFile.length>0?this.uploadedFile.forEach(t=>{null!==t.id&&this.removeFile(t)}):!this.multi&&this.uploadedFile.length>0&&this.uploadedFile.forEach(t=>{this.removeFile(t)})}scanFiles(t){t.isFile&&t.file(o=>{this.files.push({file:o,item:t})}),t.isDirectory&&t.createReader().readEntries(t=>{t.forEach(t=>{this.scanFiles(t)})})}checkIfExist(t,o="drag"){this.countFile=0,this.counter=0,this.files=[];const e="drag"===o?t.dataTransfer.files:t.target.files;if(this.subtitle||this.synchronizeSubtitle(t,o),this.removeStoredData(),this.append||(this.uploadedFile=[]),"drag"===o){const o=t.dataTransfer.items;for(const t of o){const o=t.webkitGetAsEntry();o&&this.scanFiles(o)}setTimeout(()=>{this.files.forEach(t=>{this.processing(t.file,t.item)})},150)}else for(const i of e)this.processing(i)}processing(t,o=null){this.counter++;const e=t,i=this.allowedFile.split("/"),n=e.name.split("."),l="."+n[n.length-1],a=e.size/1024/1024,s=e.type.split("/"),r="image"===i[0]?"image":"file",c=".json,.csv,.xlsx,.xls".split(",");if((r===s[0]&&a<=15||c.includes(l)&&a<=15)&&this.fun.getBase64ImageFromFile(e).then(t=>{0===this.uploadedFile.filter(o=>o.base64===t).length&&0===this.countFile&&(0===this.limit||this.uploadedFile.length<this.limit)&&(o&&this.path.push(o.fullPath),this.storeToArray(e,t)),this.multi||this.countFile++}),this.files.length===this.counter){const t=0===this.uploadedFile.length&&("image"===r&&r!==s[0]||!c.includes(l)&&"image"!==r)?`Uploaded file is not ${"image"!==this.fileType?"supported document":"image"} `:0===this.uploadedFile.length&&a>15?"File is too big.":null;null!=t&&this.fun.notify("",t,5e3)}}generateID(t){let o="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=e.length;for(let n=0;n<t;n++)o+=e.charAt(Math.floor(Math.random()*i));return o}storeToArray(t,o){const e=t.name.split("."),i=e[e.length-1],n={id:this.generateID(50),name:t.name,type:t.type,ext:i,base64:o,coordination:this.coordination};this.uploadedFile.push(n),this.emit()}synchronizeSubtitle(t,o="drag"){let e=[],i=[],n="";const l="drag"===o?t.dataTransfer.files[0]:t.target.files[0],a=l.name.split(".");if("srt"===a[a.length-1]){const t=new FileReader;t.onload=(function(t){let o=t.target.result;o=o.split("\n"),o.forEach(t=>{"\r"===t?(e.push({num:i[0],duration:i[1],text:i.slice(2,i.length).join("\n"),end:"\r"}),i=[]):i.push(t)}),e=e.map(t=>{const o=t.duration.split("--\x3e"),e=this.convertTimeInterval(o[0].trim(),0),i=this.convertTimeInterval(o[1].trim(),0);return Object.assign(Object.assign({},t),{duration:e+" --\x3e "+i})}),e.forEach(t=>{n+=t.num+"\n",n+=t.duration+"\n",n+=t.text+"\n",n+="\n"}),console.log(n)}).bind(this),t.readAsText(l)}}convertTimeInterval(t,o=0){const e=t.split(","),i=e[0].split(":");let n=3600*parseInt(i[0])+60*parseInt(i[1])+parseInt(i[2]);n+=o;const l=e[e.length-1],a=Math.floor(n/3600),s=Math.floor(n%3600/60),r=n%60;return a.toString().padStart(2,"0")+":"+s.toString().padStart(2,"0")+":"+r.toString().padStart(2,"0")+","+l}removeFile(t){this.files=[],this.uploadedFile.includes(t)&&(this.deletedFile.push(t),this.uploadedFile=this.uploadedFile.filter(o=>o!==t),this.emit())}emit(t="default"){this.touched=!0,this.color=this.touched&&"default"===t&&0===this.uploadedFile.length?"dashed 2px red":"dashed 2px #979797",this.fileDropped.emit({upload:this.uploadedFile,deleted:this.deletedFile})}showImage(t){var o;let e;if("image"!==this.fileType){const i=null===(o=t.name)||void 0===o?void 0:o.split(".");e=i[(null==i?void 0:i.length)-1]}return"image"===this.fileType?(null==t?void 0:t.base64)||(null==t?void 0:t.url):"pdf"===e?this.pdf:this.word}clickImage(t){if(this.pathTree(),"image"!==this.fileType)return null;const o={index:this.uploadedFile.findIndex(o=>o===t),images:this.uploadedFile.map(t=>t.base64||t.url)};this.viewImageService.add(o)}pathTree(){}}return t.\u0275fac=function(o){return new(o||t)(n.Qb(a.a),n.Qb(s.a))},t.\u0275cmp=n.Kb({type:t,selectors:[["app-file-upload-template"]],hostBindings:function(t,o){1&t&&n.ec("dragover",function(t){return o.onDragOver(t)})("dragleave",function(t){return o.onDragLeave(t)})("drop",function(t){return o.onDrop(t)})},inputs:{ID:"ID",uploadedFile:"uploadedFile",limit:"limit",multi:"multi",fileType:"fileType",profile:"profile",subtitle:"subtitle"},outputs:{fileDropped:"fileDropped"},decls:5,vars:6,consts:[[1,"dropzone",3,"ngStyle"],["class","content",4,"ngIf"],["style","width: 100%;",4,"ngIf"],["class","toggle",4,"ngIf"],[1,"content"],["type","file","id","fileDropRef","value","",3,"accept","multiple","change"],["fileDropRef",""],[1,"pi","pi-upload"],["for","fileDropRef"],[2,"width","100%"],[1,"custom-file-container__image-preview",2,"background-image","url(`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAiQAAAD6CAMAAACmhqw0AAAA+VBMVEUAAAD29u3u7unt7ent7enu7uju7uihoqCio6Gio6KjpKOkpaSmpqSmp6WoqKaqq6mqq6qrq6qsrautrauur62wsa6xsa+xsrCys7GztLK0tbK1trS2t7S3t7W4uba5ure6u7e7vLm8vbu9vrvAwL3Awb3DxMHFxcPGxsPHx8TIycXLzMjLzMnMzMnNzsrPz8vP0MzQ0M3S0s/U1NDV1dLX19TY2NTY2NXZ2dba2tXb29bc3Nfc3Njc3dnd3dre3tre39vg4Nvh4dzi4t3i4t7j497k5N/k5ODl5eDl5eHl5uLm5uHn5+Lo6OPp6eTq6uXr6+bs7Oft7eh54KxIAAAAB3RSTlMAHKbl5uztvql9swAABA1JREFUeNrt3VlT01AYgOG0oEEE910URNzFBVFcqCgKirLU/P8fI3QYbEOSdtrMyJzzvHfMlFx833NBQuY0SRrN8UwqabzZSJLGaYNQVacaSdMUVF0zGTMEVTeWmIH6BYkgESSCRJAIEkEiSCRIBIkgESSCRJAIEkEiQSJIBIkgESSCRJAIEgkSQSJIBIkgESSCRJBIkAgSQSJIBIkgESSCRIJEkAgSQSJIBIkgkSARJIJEkAgSQSJIBIkEiSARJIJEkAgSQSJIJEgEiSARJIJEkAgSQSJBIkgEiSARJIJEkAgSCRJBIkgEiSARJIJEgkSQ5PvxbdS+tyEJuZVb0+noTV579geSQGs/SOvqxiYkYfYwra+rbUhC7NNEjUjSJ5CE2P06jaTnIAmxKwe7vb468t3N14WOki1IAuzMwWrf1HCh3Q6S95AEWGe1b0/WlSCBBBJIIAkdSXvt1aNXa21IICld7dJU5+epJUggKV7tzuzRA4/ZHUggKVrtfNdjsXlIIClY7XLPw9NlSCA5vtqLPUguQgLJsdX+zv0fZhsSSPKrXckhWSn5jV8zG5DEiuR1DsnrEiOX0vMbkESKZDWHZLXMSFqsBJIIkOz1vn40sVdqpFgJJDHc3dzsQXKzwkihEkhiQLI+2f3y+3qVkSIlkMSAJFvsQrJYbaRACSRRIMlenj0UcPZlPyPHlUASB5Jsc+7cwevMc5v9jRxTAkkkSPbb+riVZYMYySuBJB4kJRUYySmBJHYkhUZ6lUASOZISIz1KIIkbSamRbiWQxIZkvT2YkS4lkESGpDV9tz2YkX9KIIkLSWs6TY+U9DFypASSqJC0OicfHSrpa2T/k5BEh6R1eDpWR8kARtIZSGJD0jo6QW1fySBGIIkOSavrlL27PwcxAklsSFo9JzFOppBAkl9ta5jTOiGJCslQRiCJCslwRiCJCcmQRiCJCMmwRiCJB8mXoU+YhyQaJM9TSCCBBBJIIIEEEkgggQQSSCCJAsnyzLA9hiQWJCfnSpBAAgkkkATXxFCnPxfU7iB5B0mAXT5Y7Z3t0Y087SDZgCTA7tX6bZ5TGSQBtlwrkgVIgmy+RiMXdiEJsp3b9Rn5nEESaC/O1/P3yMJuBkm4bX94O2rvNiKbWXRIBIkgESSCRJAIEkEiQSJIBIkgESSCRJAIEgkSQSJIBIkgESSCRIJEkAgSQSJIBIkgESQSJIJEkAgSQSJIBIkgkSARJIJEkAgSQSJIBIkEiSARJIJEkAgSQSJIJEgEiSARJIJEkAgSCRJBIkgEiSARJIJEkEiQCBJBIkgEiSARJIJEgkSQCBJBIkgEiSARJBIkgkSQ6P8gGTMDVTeWNA1B1TWTxmlTUFWnGknSaI4bhMoabzaSv+4BHFVoHZzfAAAAAElFTkSuQmCC`)",3,"ngClass"],["class","custom-file-container__image-multi-preview",3,"style","click",4,"ngFor","ngForOf"],[1,"custom-file-container__image-multi-preview",3,"click"],[1,"custom-file-container__image-multi-preview__single-image-clear"],[1,"custom-file-container__image-multi-preview__single-image-clear__icon",2,"font-size","16px",3,"click"],["class","fileName",4,"ngIf"],[1,"fileName"],[1,"toggle"],[1,"p-mr-2"],[3,"checked","change"],["class","p-ml-2","style","cursor: pointer;",4,"ngIf"],["class","p-ml-2",4,"ngIf"],[1,"p-ml-2",2,"cursor","pointer"],["pButton","","pRipple","","icon","pi pi-plus","styleC","cursor: pointer;","pTooltip","Add",1,"shadow-none","p-button-rounded","p-button-plain"],[1,"hiddenFileInput"],["type","file","value","",3,"accept","multiple","change"],["fileDropRef2",""],[1,"p-ml-2"],["pButton","","pRipple","","icon","pi pi-undo","pTooltip","clear",1,"shadow-none","p-button-rounded","p-button-danger","p-button-outlined","p-button-plain",3,"click"]],template:function(t,o){1&t&&(n.Wb(0,"div",0),n.Oc(1,h,10,2,"div",1),n.Oc(2,v,3,4,"div",2),n.Oc(3,S,7,4,"div",3),n.Vb(),n.Rb(4,"app-view-image-template")),2&t&&(n.oc("ngStyle",n.sc(4,w,o.color)),n.Cb(1),n.oc("ngIf",o.uploadedFile.length<=0),n.Cb(1),n.oc("ngIf",o.uploadedFile.length>0),n.Cb(1),n.oc("ngIf",o.multi))},directives:[r.n,r.m,c.a,r.k,r.l,u.a,d.b,p.a,b.a],styles:[".dropzone[_ngcontent-%COMP%]{width:100%;height:350px;text-align:center;position:relative;margin:0 auto}.dropzone[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:5.5rem;cursor:pointer}.dropzone[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:2;width:100%;height:100%;top:0;left:0}.dropzone[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff;width:183px;height:40px;font-size:17px;border-radius:21.5px;background-color:#db202f;padding:8px 16px;margin-bottom:20px}.dropzone[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#38424c}.dropzone[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{padding-right:10px;padding-bottom:0;position:absolute;right:0;bottom:0;z-index:3}.dropzone[_ngcontent-%COMP%]   .hiddenFileInput[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:2;width:100%;height:100%;top:0;left:0}.dropzone[_ngcontent-%COMP%]:hover{border:solid}.inMulti[_ngcontent-%COMP%]{height:350px}"]}),Object(i.__decorate)([Object(l.a)()],t.prototype,"blockUI",void 0),t})()}}]);