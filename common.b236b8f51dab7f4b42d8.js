(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{GaOe:function(t,e,o){"use strict";o.d(e,"a",function(){return s});var n=o("fXoL"),i=o("sSZD"),r=o("otk6");let s=(()=>{class t{constructor(t,e){this.db=t,this.fun=e,this.url="/categories"}get(t=null){const e=null!==t&&""!==t.split("=")[1]?"?"+t:null!==t&&""===t.split("=")[1]?"/"+t:"";return this.db.list(`${this.url}${e}`)}add(t,e=null){var o;delete t.id;const n=[];return(null===(o=null==t?void 0:t.image)||void 0===o?void 0:o.length)>0?t.image.forEach((o,i)=>this.fun.storeToFirebase(o,this.url).then(o=>{if(n.push(o),i+1===t.image.length)return t.image=1===n.length?n[0]:n,t.created_at=(new Date).toISOString(),this.db.list(this.url).push(t).then(t=>{this.fun.notify("Added"),e.ref.close(),e.block.stop()}).catch(t=>{e.block.stop(),this.fun.notify("","Something error occur",3e3)});i++}).catch(t=>{e.block.stop(),this.fun.notify("","Something error occur",3e3)})):(t.created_at=(new Date).toISOString(),this.db.list(this.url).push(t).then(t=>{this.fun.notify("Added"),e.ref.close(),e.block.stop()}).catch(t=>{e.block.stop(),this.fun.notify("","Something error occur",3e3)}))}update(t,e,o=null){var n;delete e.id;const i=`${this.url}/${t}`;let r=0;const s=[];return(null===(n=null==e?void 0:e.image)||void 0===n?void 0:n.length)>0?e.image.forEach((t,n)=>null==(null==t?void 0:t.url)?this.fun.storeToFirebase(t,this.url).then(t=>{if(s.push(t),r++,n+1===e.image.length)return e.image=1===s.length?s[0]:s,this.db.object(i).update(e).then(t=>{this.fun.notify("Updated"),o.ref.close(),o.block.stop()}).catch(t=>{o.block.stop(),this.fun.notify("","Something error occur",3e3)});n++}).catch(t=>{o.block.stop(),this.fun.notify("","Something error occur",3e3)}):(s.push(null==t?void 0:t.url),0===r?(e.image=1===s.length?s[0]:s,this.db.object(i).update(e).then(t=>{this.fun.notify("Update"),o.ref.close(),o.block.stop()}).catch(t=>{o.block.stop(),this.fun.notify("","Something error occur",3e3)})):void 0)):this.db.object(i).update(e).then(t=>{this.fun.notify("Update"),o.ref.close(),o.block.stop()}).catch(t=>{o.block.stop(),this.fun.notify("","Something error occur",3e3)})}delete(t){return this.db.object(`${this.url}/${t}`).remove()}}return t.\u0275fac=function(e){return new(e||t)(n.ac(i.a),n.ac(r.a))},t.\u0275prov=n.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);