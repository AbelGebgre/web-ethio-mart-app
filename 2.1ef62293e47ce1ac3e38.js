(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"7+5H":function(t,i,e){"use strict";e.d(i,"a",function(){return c});var o=e("0IaG"),n=e("fXoL"),l=e("WLRH"),s=e("ofXK");function a(t,i){if(1&t){const t=n.Xb();n.Wb(0,"button",9),n.ec("click",function(){return n.Ec(t),n.hc().onSave()}),n.Rb(1,"span",10),n.Wb(2,"span",6),n.Qc(3),n.Vb(),n.Rb(4,"span",7),n.Vb()}if(2&t){const t=n.hc();n.oc("disabled",0===t.data.length),n.Cb(3),n.Rc(t.button)}}let c=(()=>{class t{constructor(t){this.config=t,this.formSubmit=new n.o,this.modalAction=new n.o,this.formSave=new n.o,this.formClose=new n.o,this.columns=[],this.data=[],this.actions=[],this.toolBarActions=[],this.save=!0,this.isSaveMultiple=!1}ngOnInit(){var t,i,e,o,n,l,s,a,c,r,p,d,u,h;this.caption=null===(i=null===(t=this.config)||void 0===t?void 0:t.lookupData)||void 0===i?void 0:i.caption,this.button=null===(o=null===(e=this.config)||void 0===e?void 0:e.lookupData)||void 0===o?void 0:o.button,this.id=null===(l=null===(n=this.config)||void 0===n?void 0:n.lookupData)||void 0===l?void 0:l.id,this.columns=(null===(a=null===(s=this.config)||void 0===s?void 0:s.lookupData)||void 0===a?void 0:a.columns)||[],this.data=(null===(r=null===(c=this.config)||void 0===c?void 0:c.lookupData)||void 0===r?void 0:r.data)||[],this.actions=(null===(d=null===(p=this.config)||void 0===p?void 0:p.lookupData)||void 0===d?void 0:d.actions)||[],this.toolBarActions=(null===(h=null===(u=this.config)||void 0===u?void 0:u.lookupData)||void 0===h?void 0:h.toolBarActions)||[]}onActionClick(t){this.modalAction.emit(t),"trash"===t.type&&(this.data=this.data.filter(i=>i.id!==t.data.id))}onToolBarActionClick(t){}onCancel(){this.formClose.emit()}onSave(){"save"===this.button.toLowerCase()?this.formSave.emit(this.data):this.id&&"detail"===this.button.toLowerCase()&&this.formSave.emit(this.id)}}return t.\u0275fac=function(i){return new(i||t)(n.Qb(o.a))},t.\u0275cmp=n.Kb({type:t,selectors:[["app-model-table"]],inputs:{data:"data"},outputs:{formSubmit:"formSubmit",modalAction:"modalAction",formSave:"formSave",formClose:"formClose"},decls:11,vars:8,consts:[[1,"p-dialog-content",2,"overflow","hidden","overflow-x","auto"],[1,"capitalize",2,"font-size","large"],[3,"columns","data","isInModal","hasOrder","actions","toolBarActions","buttonClick","toolBarButtonClick"],["mat-dialog-actions","",1,"p-dialog-footer","button-row"],["pbutton","","pripple","","icon","pi pi-times",1,"p-button-text","p-ripple","p-button","p-component","shadow-none","p-mr-2",2,"margin-bottom","0!important",3,"click"],["aria-hidden","true",1,"p-button-icon","p-button-icon-left","pi","pi-times"],[1,"p-button-label"],[1,"p-ink"],["pbutton","","pripple","","icon","pi pi-check","class","p-button-text p-ripple p-button p-component shadow-none",3,"disabled","click",4,"ngIf"],["pbutton","","pripple","","icon","pi pi-check",1,"p-button-text","p-ripple","p-button","p-component","shadow-none",3,"disabled","click"],["aria-hidden","true",1,"p-button-icon","p-button-icon-left","pi","pi-check"]],template:function(t,i){1&t&&(n.Wb(0,"div",0),n.Wb(1,"div",1),n.Qc(2),n.Vb(),n.Wb(3,"app-table-template",2),n.ec("buttonClick",function(t){return i.onActionClick(t)})("toolBarButtonClick",function(t){return i.onToolBarActionClick(t)}),n.Vb(),n.Vb(),n.Wb(4,"div",3),n.Wb(5,"button",4),n.ec("click",function(){return i.onCancel()}),n.Rb(6,"span",5),n.Wb(7,"span",6),n.Qc(8,"Cancel"),n.Vb(),n.Rb(9,"span",7),n.Vb(),n.Oc(10,a,5,2,"button",8),n.Vb()),2&t&&(n.Cb(2),n.Sc("=> ",i.caption,""),n.Cb(1),n.oc("columns",i.columns)("data",i.data)("isInModal",!0)("hasOrder",!1)("actions",i.actions)("toolBarActions",i.toolBarActions),n.Cb(7),n.oc("ngIf",void 0!==i.button))},directives:[l.a,o.c,s.m],styles:[""]}),t})()},xivw:function(t,i,e){"use strict";e.d(i,"a",function(){return C});var o=e("mrSG"),n=e("fXoL"),l=e("12jx"),s=e("otk6"),a=e("aPmp"),c=e("ofXK"),r=e("R5Na"),p=e("1jcm"),d=e("jIHw"),u=e("Q4Mo"),h=e("xlun");function g(t,i){if(1&t){const t=n.Xb();n.Wb(0,"div",4),n.Wb(1,"input",5,6),n.ec("change",function(i){return n.Ec(t),n.hc().fileBrowserHandler(i)}),n.Vb(),n.Rb(3,"i",7),n.Wb(4,"h3"),n.Qc(5," Drag and Drop file here"),n.Vb(),n.Wb(6,"h3"),n.Qc(7,"or"),n.Vb(),n.Wb(8,"label",8),n.Qc(9,"Browse for file"),n.Vb(),n.Vb()}if(2&t){const t=n.hc();n.Cb(1),n.oc("accept",t.allowedFile)("multiple",t.multi)}}function f(t,i){if(1&t&&(n.Wb(0,"span",16),n.Qc(1),n.Vb()),2&t){const t=n.hc().$implicit;n.Cb(1),n.Rc(t.name)}}function b(t,i){if(1&t){const t=n.Xb();n.Wb(0,"div",12),n.ec("click",function(){n.Ec(t);const e=i.$implicit;return n.hc(2).clickImage(e)}),n.Wb(1,"span",13),n.Wb(2,"span",14),n.ec("click",function(){n.Ec(t);const e=i.$implicit;return n.hc(2).removeFile(e)}),n.Qc(3,"\xd7"),n.Vb(),n.Vb(),n.Oc(4,f,2,1,"span",15),n.Vb()}if(2&t){const t=i.$implicit,e=n.hc(2);n.Kc("background-image: url('",e.showImage(t),"');"),n.Cb(4),n.oc("ngIf","image"!=e.fileType)}}const m=function(t){return{inMulti:t}};function S(t,i){if(1&t&&(n.Wb(0,"div",9),n.Wb(1,"div",10),n.Oc(2,b,5,4,"div",11),n.Vb(),n.Vb()),2&t){const t=n.hc();n.Cb(1),n.oc("ngClass",n.sc(2,m,!t.multi)),n.Cb(1),n.oc("ngForOf",t.uploadedFile)}}function v(t,i){if(1&t){const t=n.Xb();n.Wb(0,"span",22),n.Wb(1,"button",23),n.Wb(2,"span",24),n.Wb(3,"input",25,26),n.ec("change",function(i){return n.Ec(t),n.hc(2).fileBrowserHandler(i)}),n.Vb(),n.Vb(),n.Vb(),n.Vb()}if(2&t){const t=n.hc(2);n.Cb(3),n.oc("accept",t.allowedFile)("multiple",t.multi)}}function I(t,i){if(1&t){const t=n.Xb();n.Wb(0,"span",27),n.Wb(1,"button",28),n.ec("click",function(){n.Ec(t);const i=n.hc(2);return i.files=[],i.uploadedFile=[]}),n.Vb(),n.Vb()}}function k(t,i){if(1&t){const t=n.Xb();n.Wb(0,"div",17),n.Wb(1,"span",18),n.Qc(2),n.Vb(),n.Wb(3,"mat-slide-toggle",19),n.ec("change",function(i){return n.Ec(t),n.hc().toggle(i)}),n.Qc(4,"Append"),n.Vb(),n.Oc(5,v,5,2,"span",20),n.Oc(6,I,2,0,"span",21),n.Vb()}if(2&t){const t=n.hc();n.Cb(2),n.Sc("",t.uploadedFile?t.uploadedFile.length:0," files upload"),n.Cb(1),n.oc("checked",t.append),n.Cb(2),n.oc("ngIf",t.uploadedFile.length>0),n.Cb(1),n.oc("ngIf",t.uploadedFile.length>0)}}const A=function(t){return{border:t}};let C=(()=>{class t{constructor(t,i){this.fun=t,this.viewImageService=i,this.deletedFile=[],this.files=[],this.path=[],this.countFile=0,this.counter=0,this.allowedFile="",this.touched=!1,this.color="dashed 2px #979797",this.pdf="../../../../assets/image/pdf.png",this.word="../../../../assets/image/word.png",this.coordination=null,this.append=!0,this.ID=0,this.uploadedFile=[],this.limit=0,this.multi=!0,this.fileType="image",this.profile=!1,this.subtitle=!1,this.fileDropped=new n.o}ngOnInit(){this.uploadedFile=this.uploadedFile.map(t=>null==t.base64&&t.split("://").length>1?{url:t,base64:"",fileType:""}:Object.assign({},t)),this.pathTree(),this.multi||(this.append=!1),this.allowedFile="image"===this.fileType?"image/*":"application/*,.csv,.json",this.limit=this.multi||0!==this.limit?this.limit:1,this.emit("OnDefault")}onDragOver(t){t.preventDefault(),t.stopPropagation(),this.color="dashed 2px green"}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.color=this.touched&&0===this.uploadedFile.length?"dashed 2px red":"dashed 2px #979797"}onDrop(t){t.preventDefault(),t.stopPropagation(),t.dataTransfer.files.length>0&&this.checkIfExist(t)}fileBrowserHandler(t){this.checkIfExist(t,"manual")}toggle(t){this.append=t.checked}removeStoredData(){this.multi&&!this.append&&this.uploadedFile.length>0?this.uploadedFile.forEach(t=>{null!==t.id&&this.removeFile(t)}):!this.multi&&this.uploadedFile.length>0&&this.uploadedFile.forEach(t=>{this.removeFile(t)})}scanFiles(t){t.isFile&&t.file(i=>{this.files.push({file:i,item:t})}),t.isDirectory&&t.createReader().readEntries(t=>{t.forEach(t=>{this.scanFiles(t)})})}checkIfExist(t,i="drag"){this.countFile=0,this.counter=0,this.files=[];const e="drag"===i?t.dataTransfer.files:t.target.files;if(this.subtitle||this.synchronizeSubtitle(t,i),this.removeStoredData(),this.append||(this.uploadedFile=[]),"drag"===i){const i=t.dataTransfer.items;for(const t of i){const i=t.webkitGetAsEntry();i&&this.scanFiles(i)}setTimeout(()=>{this.files.forEach(t=>{this.processing(t.file,t.item)})},150)}else for(const o of e)this.processing(o)}processing(t,i=null){this.counter++;const e=t,o=this.allowedFile.split("/"),n=e.name.split("."),l="."+n[n.length-1],s=e.size/1024/1024,a=e.type.split("/"),c="image"===o[0]?"image":"file",r=".json,.csv,.xlsx,.xls".split(",");if((c===a[0]&&s<=15||r.includes(l)&&s<=15)&&this.fun.getBase64ImageFromFile(e).then(t=>{0===this.uploadedFile.filter(i=>i.base64===t).length&&0===this.countFile&&(0===this.limit||this.uploadedFile.length<this.limit)&&(i&&this.path.push(i.fullPath),this.storeToArray(e,t)),this.multi||this.countFile++}),this.files.length===this.counter){const t=0===this.uploadedFile.length&&("image"===c&&c!==a[0]||!r.includes(l)&&"image"!==c)?`Uploaded file is not ${"image"!==this.fileType?"supported document":"image"} `:0===this.uploadedFile.length&&s>15?"File is too big.":null;null!=t&&this.fun.notify("",t,5e3)}}generateID(t){let i="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=e.length;for(let n=0;n<t;n++)i+=e.charAt(Math.floor(Math.random()*o));return i}storeToArray(t,i){const e=t.name.split("."),o=e[e.length-1],n={id:this.generateID(50),name:t.name,type:t.type,ext:o,base64:i,coordination:this.coordination};this.uploadedFile.push(n),this.emit()}synchronizeSubtitle(t,i="drag"){let e=[],o=[],n="";const l="drag"===i?t.dataTransfer.files[0]:t.target.files[0],s=l.name.split(".");if("srt"===s[s.length-1]){const t=new FileReader;t.onload=(function(t){let i=t.target.result;i=i.split("\n"),i.forEach(t=>{"\r"===t?(e.push({num:o[0],duration:o[1],text:o.slice(2,o.length).join("\n"),end:"\r"}),o=[]):o.push(t)}),e=e.map(t=>{const i=t.duration.split("--\x3e"),e=this.convertTimeInterval(i[0].trim(),0),o=this.convertTimeInterval(i[1].trim(),0);return Object.assign(Object.assign({},t),{duration:e+" --\x3e "+o})}),e.forEach(t=>{n+=t.num+"\n",n+=t.duration+"\n",n+=t.text+"\n",n+="\n"}),console.log(n)}).bind(this),t.readAsText(l)}}convertTimeInterval(t,i=0){const e=t.split(","),o=e[0].split(":");let n=3600*parseInt(o[0])+60*parseInt(o[1])+parseInt(o[2]);n+=i;const l=e[e.length-1],s=Math.floor(n/3600),a=Math.floor(n%3600/60),c=n%60;return s.toString().padStart(2,"0")+":"+a.toString().padStart(2,"0")+":"+c.toString().padStart(2,"0")+","+l}removeFile(t){this.files=[],this.uploadedFile.includes(t)&&(this.deletedFile.push(t),this.uploadedFile=this.uploadedFile.filter(i=>i!==t),this.emit())}emit(t="default"){this.touched=!0,this.color=this.touched&&"default"===t&&0===this.uploadedFile.length?"dashed 2px red":"dashed 2px #979797",this.fileDropped.emit({upload:this.uploadedFile,deleted:this.deletedFile})}showImage(t){var i;let e;if("image"!==this.fileType){const o=null===(i=t.name)||void 0===i?void 0:i.split(".");e=o[(null==o?void 0:o.length)-1]}return"image"===this.fileType?(null==t?void 0:t.base64)||(null==t?void 0:t.url):"pdf"===e?this.pdf:this.word}clickImage(t){if(this.pathTree(),"image"!==this.fileType)return null;const i={index:this.uploadedFile.findIndex(i=>i===t),images:this.uploadedFile.map(t=>t.base64||t.url)};this.viewImageService.add(i)}pathTree(){}}return t.\u0275fac=function(i){return new(i||t)(n.Qb(s.a),n.Qb(a.a))},t.\u0275cmp=n.Kb({type:t,selectors:[["app-file-upload-template"]],hostBindings:function(t,i){1&t&&n.ec("dragover",function(t){return i.onDragOver(t)})("dragleave",function(t){return i.onDragLeave(t)})("drop",function(t){return i.onDrop(t)})},inputs:{ID:"ID",uploadedFile:"uploadedFile",limit:"limit",multi:"multi",fileType:"fileType",profile:"profile",subtitle:"subtitle"},outputs:{fileDropped:"fileDropped"},decls:5,vars:6,consts:[[1,"dropzone",3,"ngStyle"],["class","content",4,"ngIf"],["style","width: 100%;",4,"ngIf"],["class","toggle",4,"ngIf"],[1,"content"],["type","file","id","fileDropRef","value","",3,"accept","multiple","change"],["fileDropRef",""],[1,"pi","pi-upload"],["for","fileDropRef"],[2,"width","100%"],[1,"custom-file-container__image-preview",2,"background-image","url(`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAiQAAAD6CAMAAACmhqw0AAAA+VBMVEUAAAD29u3u7unt7ent7enu7uju7uihoqCio6Gio6KjpKOkpaSmpqSmp6WoqKaqq6mqq6qrq6qsrautrauur62wsa6xsa+xsrCys7GztLK0tbK1trS2t7S3t7W4uba5ure6u7e7vLm8vbu9vrvAwL3Awb3DxMHFxcPGxsPHx8TIycXLzMjLzMnMzMnNzsrPz8vP0MzQ0M3S0s/U1NDV1dLX19TY2NTY2NXZ2dba2tXb29bc3Nfc3Njc3dnd3dre3tre39vg4Nvh4dzi4t3i4t7j497k5N/k5ODl5eDl5eHl5uLm5uHn5+Lo6OPp6eTq6uXr6+bs7Oft7eh54KxIAAAAB3RSTlMAHKbl5uztvql9swAABA1JREFUeNrt3VlT01AYgOG0oEEE910URNzFBVFcqCgKirLU/P8fI3QYbEOSdtrMyJzzvHfMlFx833NBQuY0SRrN8UwqabzZSJLGaYNQVacaSdMUVF0zGTMEVTeWmIH6BYkgESSCRJAIEkEiSCRIBIkgESSCRJAIEkEiQSJIBIkgESSCRJAIEgkSQSJIBIkgESSCRJBIkAgSQSJIBIkgESSCRIJEkAgSQSJIBIkgkSARJIJEkAgSQSJIBIkEiSARJIJEkAgSQSJIJEgEiSARJIJEkAgSQSJBIkgEiSARJIJEkAgSCRJBIkgEiSARJIJEgkSQ5PvxbdS+tyEJuZVb0+noTV579geSQGs/SOvqxiYkYfYwra+rbUhC7NNEjUjSJ5CE2P06jaTnIAmxKwe7vb468t3N14WOki1IAuzMwWrf1HCh3Q6S95AEWGe1b0/WlSCBBBJIIAkdSXvt1aNXa21IICld7dJU5+epJUggKV7tzuzRA4/ZHUggKVrtfNdjsXlIIClY7XLPw9NlSCA5vtqLPUguQgLJsdX+zv0fZhsSSPKrXckhWSn5jV8zG5DEiuR1DsnrEiOX0vMbkESKZDWHZLXMSFqsBJIIkOz1vn40sVdqpFgJJDHc3dzsQXKzwkihEkhiQLI+2f3y+3qVkSIlkMSAJFvsQrJYbaRACSRRIMlenj0UcPZlPyPHlUASB5Jsc+7cwevMc5v9jRxTAkkkSPbb+riVZYMYySuBJB4kJRUYySmBJHYkhUZ6lUASOZISIz1KIIkbSamRbiWQxIZkvT2YkS4lkESGpDV9tz2YkX9KIIkLSWs6TY+U9DFypASSqJC0OicfHSrpa2T/k5BEh6R1eDpWR8kARtIZSGJD0jo6QW1fySBGIIkOSavrlL27PwcxAklsSFo9JzFOppBAkl9ta5jTOiGJCslQRiCJCslwRiCJCcmQRiCJCMmwRiCJB8mXoU+YhyQaJM9TSCCBBBJIIIEEEkgggQQSSCCJAsnyzLA9hiQWJCfnSpBAAgkkkATXxFCnPxfU7iB5B0mAXT5Y7Z3t0Y087SDZgCTA7tX6bZ5TGSQBtlwrkgVIgmy+RiMXdiEJsp3b9Rn5nEESaC/O1/P3yMJuBkm4bX94O2rvNiKbWXRIBIkgESSCRJAIEkEiQSJIBIkgESSCRJAIEgkSQSJIBIkgESSCRIJEkAgSQSJIBIkgESQSJIJEkAgSQSJIBIkgkSARJIJEkAgSQSJIBIkEiSARJIJEkAgSQSJIJEgEiSARJIJEkAgSCRJBIkgEiSARJIJEkEiQCBJBIkgEiSARJIJEgkSQCBJBIkgEiSARJBIkgkSQ6P8gGTMDVTeWNA1B1TWTxmlTUFWnGknSaI4bhMoabzaSv+4BHFVoHZzfAAAAAElFTkSuQmCC`)",3,"ngClass"],["class","custom-file-container__image-multi-preview",3,"style","click",4,"ngFor","ngForOf"],[1,"custom-file-container__image-multi-preview",3,"click"],[1,"custom-file-container__image-multi-preview__single-image-clear"],[1,"custom-file-container__image-multi-preview__single-image-clear__icon",2,"font-size","16px",3,"click"],["class","fileName",4,"ngIf"],[1,"fileName"],[1,"toggle"],[1,"p-mr-2"],[3,"checked","change"],["class","p-ml-2","style","cursor: pointer;",4,"ngIf"],["class","p-ml-2",4,"ngIf"],[1,"p-ml-2",2,"cursor","pointer"],["pButton","","pRipple","","icon","pi pi-plus","styleC","cursor: pointer;","pTooltip","Add",1,"shadow-none","p-button-rounded","p-button-plain"],[1,"hiddenFileInput"],["type","file","value","",3,"accept","multiple","change"],["fileDropRef2",""],[1,"p-ml-2"],["pButton","","pRipple","","icon","pi pi-undo","pTooltip","clear",1,"shadow-none","p-button-rounded","p-button-danger","p-button-outlined","p-button-plain",3,"click"]],template:function(t,i){1&t&&(n.Wb(0,"div",0),n.Oc(1,g,10,2,"div",1),n.Oc(2,S,3,4,"div",2),n.Oc(3,k,7,4,"div",3),n.Vb(),n.Rb(4,"app-view-image-template")),2&t&&(n.oc("ngStyle",n.sc(4,A,i.color)),n.Cb(1),n.oc("ngIf",i.uploadedFile.length<=0),n.Cb(1),n.oc("ngIf",i.uploadedFile.length>0),n.Cb(1),n.oc("ngIf",i.multi))},directives:[c.n,c.m,r.a,c.k,c.l,p.a,d.b,u.a,h.a],styles:[".dropzone[_ngcontent-%COMP%]{width:100%;height:350px;text-align:center;position:relative;margin:0 auto}.dropzone[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:5.5rem;cursor:pointer}.dropzone[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:2;width:100%;height:100%;top:0;left:0}.dropzone[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff;width:183px;height:40px;font-size:17px;border-radius:21.5px;background-color:#db202f;padding:8px 16px;margin-bottom:20px}.dropzone[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#38424c}.dropzone[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{padding-right:10px;padding-bottom:0;position:absolute;right:0;bottom:0;z-index:3}.dropzone[_ngcontent-%COMP%]   .hiddenFileInput[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:2;width:100%;height:100%;top:0;left:0}.dropzone[_ngcontent-%COMP%]:hover{border:solid}.inMulti[_ngcontent-%COMP%]{height:350px}"]}),Object(o.__decorate)([Object(l.a)()],t.prototype,"blockUI",void 0),t})()}}]);