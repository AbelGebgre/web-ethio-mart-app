(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"/orR":function(e,t,i){"use strict";i.d(t,"a",function(){return s});var n=i("mrSG"),o=i("4ZtF"),l=i("fXoL");let s=(()=>{let e=class extends o.b{constructor(){super()}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e=Object(n.__decorate)([Object(o.i)({name:"fields",resettable:!0})],e),e})()},"/vft":function(e,t,i){"use strict";i.d(t,"a",function(){return r});var n=i("mrSG"),o=i("4ZtF"),l=i("fXoL"),s=i("/orR");let r=(()=>{let e=class extends o.f{constructor(e){super(e),this.store=e}};return e.\u0275fac=function(t){return new(t||e)(l.ac(s.a))},e.\u0275prov=l.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e=Object(n.__decorate)([Object(o.e)({sortBy:"id",sortByOrder:o.c.DESC})],e),e})()},H28f:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var n=i("fXoL"),o=i("/orR");let l=(()=>{class e{constructor(e){this.store=e}add(e){this.store.add(e)}set(e){this.store.set(e)}update(e){this.store.update(e.id,e)}delete(e){this.store.remove(e)}destroy(){this.store.destroy()}}return e.\u0275fac=function(t){return new(t||e)(n.ac(o.a))},e.\u0275prov=n.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},xivw:function(e,t,i){"use strict";i.d(t,"a",function(){return E});var n=i("mrSG"),o=i("fXoL"),l=i("12jx"),s=i("otk6"),r=i("aPmp"),a=i("ofXK"),c=i("R5Na"),p=i("1jcm"),d=i("jIHw"),u=i("Q4Mo"),h=i("xlun");function g(e,t){if(1&e){const e=o.Xb();o.Wb(0,"div",4),o.Wb(1,"input",5,6),o.ec("change",function(t){return o.Ec(e),o.hc().fileBrowserHandler(t)}),o.Vb(),o.Rb(3,"i",7),o.Wb(4,"h3"),o.Qc(5," Drag and Drop file here"),o.Vb(),o.Wb(6,"h3"),o.Qc(7,"or"),o.Vb(),o.Wb(8,"label",8),o.Qc(9,"Browse for file"),o.Vb(),o.Vb()}if(2&e){const e=o.hc();o.Cb(1),o.oc("accept",e.allowedFile)("multiple",e.multi)}}function f(e,t){if(1&e&&(o.Wb(0,"span",16),o.Qc(1),o.Vb()),2&e){const e=o.hc().$implicit;o.Cb(1),o.Rc(e.name)}}function m(e,t){if(1&e){const e=o.Xb();o.Wb(0,"div",12),o.ec("click",function(){o.Ec(e);const i=t.$implicit;return o.hc(2).clickImage(i)}),o.Wb(1,"span",13),o.Wb(2,"span",14),o.ec("click",function(){o.Ec(e);const i=t.$implicit;return o.hc(2).removeFile(i)}),o.Qc(3,"\xd7"),o.Vb(),o.Vb(),o.Oc(4,f,2,1,"span",15),o.Vb()}if(2&e){const e=t.$implicit,i=o.hc(2);o.Kc("background-image: url('",i.showImage(e),"');"),o.Cb(4),o.oc("ngIf","image"!=i.fileType)}}const b=function(e){return{inMulti:e}};function S(e,t){if(1&e&&(o.Wb(0,"div",9),o.Wb(1,"div",10),o.Oc(2,m,5,4,"div",11),o.Vb(),o.Vb()),2&e){const e=o.hc();o.Cb(1),o.oc("ngClass",o.sc(2,b,!e.multi)),o.Cb(1),o.oc("ngForOf",e.uploadedFile)}}function I(e,t){if(1&e){const e=o.Xb();o.Wb(0,"span",22),o.Wb(1,"button",23),o.Wb(2,"span",24),o.Wb(3,"input",25,26),o.ec("change",function(t){return o.Ec(e),o.hc(2).fileBrowserHandler(t)}),o.Vb(),o.Vb(),o.Vb(),o.Vb()}if(2&e){const e=o.hc(2);o.Cb(3),o.oc("accept",e.allowedFile)("multiple",e.multi)}}function k(e,t){if(1&e){const e=o.Xb();o.Wb(0,"span",27),o.Wb(1,"button",28),o.ec("click",function(){o.Ec(e);const t=o.hc(2);return t.files=[],t.uploadedFile=[]}),o.Vb(),o.Vb()}}function A(e,t){if(1&e){const e=o.Xb();o.Wb(0,"div",17),o.Wb(1,"span",18),o.Qc(2),o.Vb(),o.Wb(3,"mat-slide-toggle",19),o.ec("change",function(t){return o.Ec(e),o.hc().toggle(t)}),o.Qc(4,"Append"),o.Vb(),o.Oc(5,I,5,2,"span",20),o.Oc(6,k,2,0,"span",21),o.Vb()}if(2&e){const e=o.hc();o.Cb(2),o.Sc("",e.uploadedFile?e.uploadedFile.length:0," files upload"),o.Cb(1),o.oc("checked",e.append),o.Cb(2),o.oc("ngIf",e.uploadedFile.length>0),o.Cb(1),o.oc("ngIf",e.uploadedFile.length>0)}}const v=function(e){return{border:e}};let E=(()=>{class e{constructor(e,t){this.fun=e,this.viewImageService=t,this.deletedFile=[],this.files=[],this.path=[],this.countFile=0,this.counter=0,this.allowedFile="",this.touched=!1,this.color="dashed 2px #979797",this.pdf="../../../../assets/image/pdf.png",this.word="../../../../assets/image/word.png",this.coordination=null,this.append=!0,this.ID=0,this.uploadedFile=[],this.limit=0,this.multi=!0,this.fileType="image",this.profile=!1,this.subtitle=!1,this.fileDropped=new o.o}ngOnInit(){this.uploadedFile=this.uploadedFile.map(e=>null==e.base64&&e.split("://").length>1?{url:e,base64:"",fileType:""}:Object.assign({},e)),this.pathTree(),this.multi||(this.append=!1),this.allowedFile="image"===this.fileType?"image/*":"application/*,.csv,.json",this.limit=this.multi||0!==this.limit?this.limit:1,this.emit("OnDefault")}onDragOver(e){e.preventDefault(),e.stopPropagation(),this.color="dashed 2px green"}onDragLeave(e){e.preventDefault(),e.stopPropagation(),this.color=this.touched&&0===this.uploadedFile.length?"dashed 2px red":"dashed 2px #979797"}onDrop(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.files.length>0&&this.checkIfExist(e)}fileBrowserHandler(e){this.checkIfExist(e,"manual")}toggle(e){this.append=e.checked}removeStoredData(){this.multi&&!this.append&&this.uploadedFile.length>0?this.uploadedFile.forEach(e=>{null!==e.id&&this.removeFile(e)}):!this.multi&&this.uploadedFile.length>0&&this.uploadedFile.forEach(e=>{this.removeFile(e)})}scanFiles(e){e.isFile&&e.file(t=>{this.files.push({file:t,item:e})}),e.isDirectory&&e.createReader().readEntries(e=>{e.forEach(e=>{this.scanFiles(e)})})}checkIfExist(e,t="drag"){this.countFile=0,this.counter=0,this.files=[];const i="drag"===t?e.dataTransfer.files:e.target.files;if(this.subtitle||this.synchronizeSubtitle(e,t),this.removeStoredData(),this.append||(this.uploadedFile=[]),"drag"===t){const t=e.dataTransfer.items;for(const e of t){const t=e.webkitGetAsEntry();t&&this.scanFiles(t)}setTimeout(()=>{this.files.forEach(e=>{this.processing(e.file,e.item)})},150)}else for(const n of i)this.processing(n)}processing(e,t=null){this.counter++;const i=e,n=this.allowedFile.split("/"),o=i.name.split("."),l="."+o[o.length-1],s=i.size/1024/1024,r=i.type.split("/"),a="image"===n[0]?"image":"file",c=".json,.csv,.xlsx,.xls".split(",");if((a===r[0]&&s<=15||c.includes(l)&&s<=15)&&this.fun.getBase64ImageFromFile(i).then(e=>{0===this.uploadedFile.filter(t=>t.base64===e).length&&0===this.countFile&&(0===this.limit||this.uploadedFile.length<this.limit)&&(t&&this.path.push(t.fullPath),this.storeToArray(i,e)),this.multi||this.countFile++}),this.files.length===this.counter){const e=0===this.uploadedFile.length&&("image"===a&&a!==r[0]||!c.includes(l)&&"image"!==a)?`Uploaded file is not ${"image"!==this.fileType?"supported document":"image"} `:0===this.uploadedFile.length&&s>15?"File is too big.":null;null!=e&&this.fun.notify("",e,5e3)}}generateID(e){let t="";const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=i.length;for(let o=0;o<e;o++)t+=i.charAt(Math.floor(Math.random()*n));return t}storeToArray(e,t){const i=e.name.split("."),n=i[i.length-1],o={id:this.generateID(50),name:e.name,type:e.type,ext:n,base64:t,coordination:this.coordination};this.uploadedFile.push(o),this.emit()}synchronizeSubtitle(e,t="drag"){let i=[],n=[],o="";const l="drag"===t?e.dataTransfer.files[0]:e.target.files[0],s=l.name.split(".");if("srt"===s[s.length-1]){const e=new FileReader;e.onload=(function(e){let t=e.target.result;t=t.split("\n"),t.forEach(e=>{"\r"===e?(i.push({num:n[0],duration:n[1],text:n.slice(2,n.length).join("\n"),end:"\r"}),n=[]):n.push(e)}),i=i.map(e=>{const t=e.duration.split("--\x3e"),i=this.convertTimeInterval(t[0].trim(),0),n=this.convertTimeInterval(t[1].trim(),0);return Object.assign(Object.assign({},e),{duration:i+" --\x3e "+n})}),i.forEach(e=>{o+=e.num+"\n",o+=e.duration+"\n",o+=e.text+"\n",o+="\n"}),console.log(o)}).bind(this),e.readAsText(l)}}convertTimeInterval(e,t=0){const i=e.split(","),n=i[0].split(":");let o=3600*parseInt(n[0])+60*parseInt(n[1])+parseInt(n[2]);o+=t;const l=i[i.length-1],s=Math.floor(o/3600),r=Math.floor(o%3600/60),a=o%60;return s.toString().padStart(2,"0")+":"+r.toString().padStart(2,"0")+":"+a.toString().padStart(2,"0")+","+l}removeFile(e){this.files=[],this.uploadedFile.includes(e)&&(this.deletedFile.push(e),this.uploadedFile=this.uploadedFile.filter(t=>t!==e),this.emit())}emit(e="default"){this.touched=!0,this.color=this.touched&&"default"===e&&0===this.uploadedFile.length?"dashed 2px red":"dashed 2px #979797",this.fileDropped.emit({upload:this.uploadedFile,deleted:this.deletedFile})}showImage(e){var t;let i;if("image"!==this.fileType){const n=null===(t=e.name)||void 0===t?void 0:t.split(".");i=n[(null==n?void 0:n.length)-1]}return"image"===this.fileType?(null==e?void 0:e.base64)||(null==e?void 0:e.url):"pdf"===i?this.pdf:this.word}clickImage(e){if(this.pathTree(),"image"!==this.fileType)return null;const t={index:this.uploadedFile.findIndex(t=>t===e),images:this.uploadedFile.map(e=>e.base64||e.url)};this.viewImageService.add(t)}pathTree(){}}return e.\u0275fac=function(t){return new(t||e)(o.Qb(s.a),o.Qb(r.a))},e.\u0275cmp=o.Kb({type:e,selectors:[["app-file-upload-template"]],hostBindings:function(e,t){1&e&&o.ec("dragover",function(e){return t.onDragOver(e)})("dragleave",function(e){return t.onDragLeave(e)})("drop",function(e){return t.onDrop(e)})},inputs:{ID:"ID",uploadedFile:"uploadedFile",limit:"limit",multi:"multi",fileType:"fileType",profile:"profile",subtitle:"subtitle"},outputs:{fileDropped:"fileDropped"},decls:5,vars:6,consts:[[1,"dropzone",3,"ngStyle"],["class","content",4,"ngIf"],["style","width: 100%;",4,"ngIf"],["class","toggle",4,"ngIf"],[1,"content"],["type","file","id","fileDropRef","value","",3,"accept","multiple","change"],["fileDropRef",""],[1,"pi","pi-upload"],["for","fileDropRef"],[2,"width","100%"],[1,"custom-file-container__image-preview",2,"background-image","url(`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAiQAAAD6CAMAAACmhqw0AAAA+VBMVEUAAAD29u3u7unt7ent7enu7uju7uihoqCio6Gio6KjpKOkpaSmpqSmp6WoqKaqq6mqq6qrq6qsrautrauur62wsa6xsa+xsrCys7GztLK0tbK1trS2t7S3t7W4uba5ure6u7e7vLm8vbu9vrvAwL3Awb3DxMHFxcPGxsPHx8TIycXLzMjLzMnMzMnNzsrPz8vP0MzQ0M3S0s/U1NDV1dLX19TY2NTY2NXZ2dba2tXb29bc3Nfc3Njc3dnd3dre3tre39vg4Nvh4dzi4t3i4t7j497k5N/k5ODl5eDl5eHl5uLm5uHn5+Lo6OPp6eTq6uXr6+bs7Oft7eh54KxIAAAAB3RSTlMAHKbl5uztvql9swAABA1JREFUeNrt3VlT01AYgOG0oEEE910URNzFBVFcqCgKirLU/P8fI3QYbEOSdtrMyJzzvHfMlFx833NBQuY0SRrN8UwqabzZSJLGaYNQVacaSdMUVF0zGTMEVTeWmIH6BYkgESSCRJAIEkEiSCRIBIkgESSCRJAIEkEiQSJIBIkgESSCRJAIEgkSQSJIBIkgESSCRJBIkAgSQSJIBIkgESSCRIJEkAgSQSJIBIkgkSARJIJEkAgSQSJIBIkEiSARJIJEkAgSQSJIJEgEiSARJIJEkAgSQSJBIkgEiSARJIJEkAgSCRJBIkgEiSARJIJEgkSQ5PvxbdS+tyEJuZVb0+noTV579geSQGs/SOvqxiYkYfYwra+rbUhC7NNEjUjSJ5CE2P06jaTnIAmxKwe7vb468t3N14WOki1IAuzMwWrf1HCh3Q6S95AEWGe1b0/WlSCBBBJIIAkdSXvt1aNXa21IICld7dJU5+epJUggKV7tzuzRA4/ZHUggKVrtfNdjsXlIIClY7XLPw9NlSCA5vtqLPUguQgLJsdX+zv0fZhsSSPKrXckhWSn5jV8zG5DEiuR1DsnrEiOX0vMbkESKZDWHZLXMSFqsBJIIkOz1vn40sVdqpFgJJDHc3dzsQXKzwkihEkhiQLI+2f3y+3qVkSIlkMSAJFvsQrJYbaRACSRRIMlenj0UcPZlPyPHlUASB5Jsc+7cwevMc5v9jRxTAkkkSPbb+riVZYMYySuBJB4kJRUYySmBJHYkhUZ6lUASOZISIz1KIIkbSamRbiWQxIZkvT2YkS4lkESGpDV9tz2YkX9KIIkLSWs6TY+U9DFypASSqJC0OicfHSrpa2T/k5BEh6R1eDpWR8kARtIZSGJD0jo6QW1fySBGIIkOSavrlL27PwcxAklsSFo9JzFOppBAkl9ta5jTOiGJCslQRiCJCslwRiCJCcmQRiCJCMmwRiCJB8mXoU+YhyQaJM9TSCCBBBJIIIEEEkgggQQSSCCJAsnyzLA9hiQWJCfnSpBAAgkkkATXxFCnPxfU7iB5B0mAXT5Y7Z3t0Y087SDZgCTA7tX6bZ5TGSQBtlwrkgVIgmy+RiMXdiEJsp3b9Rn5nEESaC/O1/P3yMJuBkm4bX94O2rvNiKbWXRIBIkgESSCRJAIEkEiQSJIBIkgESSCRJAIEgkSQSJIBIkgESSCRIJEkAgSQSJIBIkgESQSJIJEkAgSQSJIBIkgkSARJIJEkAgSQSJIBIkEiSARJIJEkAgSQSJIJEgEiSARJIJEkAgSCRJBIkgEiSARJIJEkEiQCBJBIkgEiSARJIJEgkSQCBJBIkgEiSARJBIkgkSQ6P8gGTMDVTeWNA1B1TWTxmlTUFWnGknSaI4bhMoabzaSv+4BHFVoHZzfAAAAAElFTkSuQmCC`)",3,"ngClass"],["class","custom-file-container__image-multi-preview",3,"style","click",4,"ngFor","ngForOf"],[1,"custom-file-container__image-multi-preview",3,"click"],[1,"custom-file-container__image-multi-preview__single-image-clear"],[1,"custom-file-container__image-multi-preview__single-image-clear__icon",2,"font-size","16px",3,"click"],["class","fileName",4,"ngIf"],[1,"fileName"],[1,"toggle"],[1,"p-mr-2"],[3,"checked","change"],["class","p-ml-2","style","cursor: pointer;",4,"ngIf"],["class","p-ml-2",4,"ngIf"],[1,"p-ml-2",2,"cursor","pointer"],["pButton","","pRipple","","icon","pi pi-plus","styleC","cursor: pointer;","pTooltip","Add",1,"shadow-none","p-button-rounded","p-button-plain"],[1,"hiddenFileInput"],["type","file","value","",3,"accept","multiple","change"],["fileDropRef2",""],[1,"p-ml-2"],["pButton","","pRipple","","icon","pi pi-undo","pTooltip","clear",1,"shadow-none","p-button-rounded","p-button-danger","p-button-outlined","p-button-plain",3,"click"]],template:function(e,t){1&e&&(o.Wb(0,"div",0),o.Oc(1,g,10,2,"div",1),o.Oc(2,S,3,4,"div",2),o.Oc(3,A,7,4,"div",3),o.Vb(),o.Rb(4,"app-view-image-template")),2&e&&(o.oc("ngStyle",o.sc(4,v,t.color)),o.Cb(1),o.oc("ngIf",t.uploadedFile.length<=0),o.Cb(1),o.oc("ngIf",t.uploadedFile.length>0),o.Cb(1),o.oc("ngIf",t.multi))},directives:[a.n,a.m,c.a,a.k,a.l,p.a,d.b,u.a,h.a],styles:[".dropzone[_ngcontent-%COMP%]{width:100%;height:350px;text-align:center;position:relative;margin:0 auto}.dropzone[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:5.5rem;cursor:pointer}.dropzone[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:2;width:100%;height:100%;top:0;left:0}.dropzone[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff;width:183px;height:40px;font-size:17px;border-radius:21.5px;background-color:#db202f;padding:8px 16px;margin-bottom:20px}.dropzone[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#38424c}.dropzone[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{padding-right:10px;padding-bottom:0;position:absolute;right:0;bottom:0;z-index:3}.dropzone[_ngcontent-%COMP%]   .hiddenFileInput[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:2;width:100%;height:100%;top:0;left:0}.dropzone[_ngcontent-%COMP%]:hover{border:solid}.inMulti[_ngcontent-%COMP%]{height:350px}"]}),Object(n.__decorate)([Object(l.a)()],e.prototype,"blockUI",void 0),e})()}}]);